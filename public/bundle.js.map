{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/Point.js","../node_modules/autotrack/lib/method-chain.js","../node_modules/autotrack/lib/constants.js","../node_modules/dom-utils/lib/matches.js","../node_modules/dom-utils/lib/parents.js","../node_modules/dom-utils/lib/dispatch.js","../node_modules/dom-utils/lib/get-attributes.js","../node_modules/dom-utils/lib/parse-url.js","../node_modules/autotrack/lib/utilities.js","../node_modules/autotrack/lib/provide.js","../node_modules/autotrack/lib/usage.js","../node_modules/autotrack/lib/plugins/url-change-tracker.js","../src/loader.js","../src/AudioSample.js","../src/Grid.js","../src/Worm.js","../src/drawdna.js","../src/graphics.js","../src/scorecanvas.js","../src/gameio.js","../src/Game.js","../src/main.js"],"sourcesContent":["// utils.js\n\nexport function log ( str )  {\n  if ($('#logging').slider().val() == \"true\") {\n    console.log( str );\n  }\n}\nexport function logging ( )   {\n  return ($('#logging').slider().val() == \"true\");\n}\n\nexport function numOneBits( val) {\n  var nbits = 0;\n  while (val > 0 ) {\n    nbits += val & 1;\n    val >>= 1;\n  }\n  return nbits;\n}\n","/**\n * Created with JetBrains WebStorm.\n * User: dmaynard\n * Date: 9/21/13\n * Time: 11:37 PM\n */\n\n import {\n   log,\n   logging\n } from \"./utils.js\"\n\nexport class  Point {\n  constructor(x,y) {\n    const privateString = \"(\" + x + \",\" + y + \")\";\n    this.x = x;\n    this.y = y;\n  }\n  isEqualTo (other) {\n      return this.x == other.x && this.y == other.y;\n  };\n  add (other) {\n  //    log (\" adding (\" + other.x + \",\" + other.y + \" to (\" + this.x + \",\" + this.y );\n      this.x = this.x + other.x;\n      this.y = this.y + other.y;\n    }\n  dist(other) {\n        //  log (\" dist from (\" + other.x + \",\" + other.y + \") to (\" + this.x + \",\" + this.y );\n        return Math.sqrt((this.x - other.x ) * (this.x - other.x) +  (this.y - other.y) * (this.y - other.y));\n    }\n  absDiff (other) {\n        //  log (\" dist from (\" + other.x + \",\" + other.y + \") to (\" + this.x + \",\" + this.y );\n        return new Point( Math.abs(this.x-other.x) , Math.abs(this.y-other.y));\n    }\n  wrap (wg, hg) {\n        if (this.x >= wg) this.x = this.x - wg;\n        if (this.x < 0) this.x = this.x + wg;\n        if (this.y >= hg) this.y = this.y - hg;\n        if (this.y < 0) {\n            this.y = this.y + hg;\n        }\n    };\n\n    format ( ) {\n        return \"(\" + this.x + \",\" + this.y + \")\";\n    };\n\n    print ( ) {\n      log ( \" Private class variable \" + privateString);\n    }\n}\n","/**\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @fileoverview\n * The functions exported by this module make it easier (and safer) to override\n * foreign object methods (in a modular way) and respond to or modify their\n * invocation. The primary feature is the ability to override a method without\n * worrying if it's already been overridden somewhere else in the codebase. It\n * also allows for safe restoring of an overridden method by only fully\n * restoring a method once all overrides have been removed.\n */\n\n\nconst instances = [];\n\n\n/**\n * A class that wraps a foreign object method and emit events before and\n * after the original method is called.\n */\nexport default class MethodChain {\n  /**\n   * Adds the passed override method to the list of method chain overrides.\n   * @param {!Object} context The object containing the method to chain.\n   * @param {string} methodName The name of the method on the object.\n   * @param {!Function} methodOverride The override method to add.\n   */\n  static add(context, methodName, methodOverride) {\n    getOrCreateMethodChain(context, methodName).add(methodOverride);\n  }\n\n  /**\n   * Removes a method chain added via `add()`. If the override is the\n   * only override added, the original method is restored.\n   * @param {!Object} context The object containing the method to unchain.\n   * @param {string} methodName The name of the method on the object.\n   * @param {!Function} methodOverride The override method to remove.\n   */\n  static remove(context, methodName, methodOverride) {\n    getOrCreateMethodChain(context, methodName).remove(methodOverride);\n  }\n\n  /**\n   * Wraps a foreign object method and overrides it. Also stores a reference\n   * to the original method so it can be restored later.\n   * @param {!Object} context The object containing the method.\n   * @param {string} methodName The name of the method on the object.\n   */\n  constructor(context, methodName) {\n    this.context = context;\n    this.methodName = methodName;\n    this.isTask = /Task$/.test(methodName);\n\n    this.originalMethodReference = this.isTask ?\n        context.get(methodName) : context[methodName];\n\n    this.methodChain = [];\n    this.boundMethodChain = [];\n\n    // Wraps the original method.\n    this.wrappedMethod = (...args) => {\n      const lastBoundMethod =\n          this.boundMethodChain[this.boundMethodChain.length - 1];\n\n      return lastBoundMethod(...args);\n    };\n\n    // Override original method with the wrapped one.\n    if (this.isTask) {\n      context.set(methodName, this.wrappedMethod);\n    } else {\n      context[methodName] = this.wrappedMethod;\n    }\n  }\n\n  /**\n   * Adds a method to the method chain.\n   * @param {!Function} overrideMethod The override method to add.\n   */\n  add(overrideMethod) {\n    this.methodChain.push(overrideMethod);\n    this.rebindMethodChain();\n  }\n\n  /**\n   * Removes a method from the method chain and restores the prior order.\n   * @param {!Function} overrideMethod The override method to remove.\n   */\n  remove(overrideMethod) {\n    const index = this.methodChain.indexOf(overrideMethod);\n    if (index > -1) {\n      this.methodChain.splice(index, 1);\n      if (this.methodChain.length > 0) {\n        this.rebindMethodChain();\n      } else {\n        this.destroy();\n      }\n    }\n  }\n\n  /**\n   * Loops through the method chain array and recreates the bound method\n   * chain array. This is necessary any time a method is added or removed\n   * to ensure proper original method context and order.\n   */\n  rebindMethodChain() {\n    this.boundMethodChain = [];\n    for (let method, i = 0; method = this.methodChain[i]; i++) {\n      const previousMethod = this.boundMethodChain[i - 1] ||\n          this.originalMethodReference.bind(this.context);\n      this.boundMethodChain.push(method(previousMethod));\n    }\n  }\n\n  /**\n   * Calls super and destroys the instance if no registered handlers remain.\n   */\n  destroy() {\n    const index = instances.indexOf(this);\n    if (index > -1) {\n      instances.splice(index, 1);\n      if (this.isTask) {\n        this.context.set(this.methodName, this.originalMethodReference);\n      } else {\n        this.context[this.methodName] = this.originalMethodReference;\n      }\n    }\n  }\n}\n\n\n/**\n * Gets a MethodChain instance for the passed object and method. If the method\n * has already been wrapped via an existing MethodChain instance, that\n * instance is returned.\n * @param {!Object} context The object containing the method.\n * @param {string} methodName The name of the method on the object.\n * @return {!MethodChain}\n */\nfunction getOrCreateMethodChain(context, methodName) {\n  let methodChain = instances\n      .filter((h) => h.context == context && h.methodName == methodName)[0];\n\n  if (!methodChain) {\n    methodChain = new MethodChain(context, methodName);\n    instances.push(methodChain);\n  }\n  return methodChain;\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nexport const VERSION = '2.4.1';\nexport const DEV_ID = 'i5iSjo';\n\nexport const VERSION_PARAM = '_av';\nexport const USAGE_PARAM = '_au';\n\nexport const NULL_DIMENSION = '(not set)';\n","const proto = window.Element.prototype;\nconst nativeMatches = proto.matches ||\n      proto.matchesSelector ||\n      proto.webkitMatchesSelector ||\n      proto.mozMatchesSelector ||\n      proto.msMatchesSelector ||\n      proto.oMatchesSelector;\n\n\n/**\n * Tests if a DOM elements matches any of the test DOM elements or selectors.\n * @param {Element} element The DOM element to test.\n * @param {Element|string|Array<Element|string>} test A DOM element, a CSS\n *     selector, or an array of DOM elements or CSS selectors to match against.\n * @return {boolean} True of any part of the test matches.\n */\nexport default function matches(element, test) {\n  // Validate input.\n  if (element && element.nodeType == 1 && test) {\n    // if test is a string or DOM element test it.\n    if (typeof test == 'string' || test.nodeType == 1) {\n      return element == test ||\n          matchesSelector(element, /** @type {string} */ (test));\n    } else if ('length' in test) {\n      // if it has a length property iterate over the items\n      // and return true if any match.\n      for (let i = 0, item; item = test[i]; i++) {\n        if (element == item || matchesSelector(element, item)) return true;\n      }\n    }\n  }\n  // Still here? Return false\n  return false;\n}\n\n\n/**\n * Tests whether a DOM element matches a selector. This polyfills the native\n * Element.prototype.matches method across browsers.\n * @param {!Element} element The DOM element to test.\n * @param {string} selector The CSS selector to test element against.\n * @return {boolean} True if the selector matches.\n */\nfunction matchesSelector(element, selector) {\n  if (typeof selector != 'string') return false;\n  if (nativeMatches) return nativeMatches.call(element, selector);\n  const nodes = element.parentNode.querySelectorAll(selector);\n  for (let i = 0, node; node = nodes[i]; i++) {\n    if (node == element) return true;\n  }\n  return false;\n}\n","/**\n * Returns an array of a DOM element's parent elements.\n * @param {!Element} element The DOM element whose parents to get.\n * @return {!Array} An array of all parent elemets, or an empty array if no\n *     parent elements are found.\n */\nexport default function parents(element) {\n  const list = [];\n  while (element && element.parentNode && element.parentNode.nodeType == 1) {\n    element = /** @type {!Element} */ (element.parentNode);\n    list.push(element);\n  }\n  return list;\n}\n","/**\n * Dispatches an event on the passed element.\n * @param {!Element} element The DOM element to dispatch the event on.\n * @param {string} eventType The type of event to dispatch.\n * @param {Object|string=} eventName A string name of the event constructor\n *     to use. Defaults to 'Event' if nothing is passed or 'CustomEvent' if\n *     a value is set on `initDict.detail`. If eventName is given an object\n *     it is assumed to be initDict and thus reassigned.\n * @param {Object=} initDict The initialization attributes for the\n *     event. A `detail` property can be used here to pass custom data.\n * @return {boolean} The return value of `element.dispatchEvent`, which will\n *     be false if any of the event listeners called `preventDefault`.\n */\nexport default function dispatch(\n    element, eventType, eventName = 'Event', initDict = {}) {\n  let event;\n  let isCustom;\n\n  // eventName is optional\n  if (typeof eventName == 'object') {\n    initDict = eventName;\n    eventName = 'Event';\n  }\n\n  initDict.bubbles = initDict.bubbles || false;\n  initDict.cancelable = initDict.cancelable || false;\n  initDict.composed = initDict.composed || false;\n\n  // If a detail property is passed, this is a custom event.\n  if ('detail' in initDict) isCustom = true;\n  eventName = isCustom ? 'CustomEvent' : eventName;\n\n  // Tries to create the event using constructors, if that doesn't work,\n  // fallback to `document.createEvent()`.\n  try {\n    event = new window[eventName](eventType, initDict);\n  } catch(err) {\n    event = document.createEvent(eventName);\n    const initMethod = 'init' + (isCustom ? 'Custom' : '') + 'Event';\n    event[initMethod](eventType, initDict.bubbles,\n                      initDict.cancelable, initDict.detail);\n  }\n\n  return element.dispatchEvent(event);\n}\n","/**\n * Gets all attributes of an element as a plain JavaScriot object.\n * @param {Element} element The element whose attributes to get.\n * @return {!Object} An object whose keys are the attribute keys and whose\n *     values are the attribute values. If no attributes exist, an empty\n *     object is returned.\n */\nexport default function getAttributes(element) {\n  const attrs = {};\n\n  // Validate input.\n  if (!(element && element.nodeType == 1)) return attrs;\n\n  // Return an empty object if there are no attributes.\n  const map = element.attributes;\n  if (map.length === 0) return {};\n\n  for (let i = 0, attr; attr = map[i]; i++) {\n    attrs[attr.name] = attr.value;\n  }\n  return attrs;\n}\n","const HTTP_PORT = '80';\nconst HTTPS_PORT = '443';\nconst DEFAULT_PORT = RegExp(':(' + HTTP_PORT + '|' + HTTPS_PORT + ')$');\n\n\nconst a = document.createElement('a');\nconst cache = {};\n\n\n/**\n * Parses the given url and returns an object mimicing a `Location` object.\n * @param {string} url The url to parse.\n * @return {!Object} An object with the same properties as a `Location`.\n */\nexport default function parseUrl(url) {\n  // All falsy values (as well as \".\") should map to the current URL.\n  url = (!url || url == '.') ? location.href : url;\n\n  if (cache[url]) return cache[url];\n\n  a.href = url;\n\n  // When parsing file relative paths (e.g. `../index.html`), IE will correctly\n  // resolve the `href` property but will keep the `..` in the `path` property.\n  // It will also not include the `host` or `hostname` properties. Furthermore,\n  // IE will sometimes return no protocol or just a colon, especially for things\n  // like relative protocol URLs (e.g. \"//google.com\").\n  // To workaround all of these issues, we reparse with the full URL from the\n  // `href` property.\n  if (url.charAt(0) == '.' || url.charAt(0) == '/') return parseUrl(a.href);\n\n  // Don't include default ports.\n  let port = (a.port == HTTP_PORT || a.port == HTTPS_PORT) ? '' : a.port;\n\n  // PhantomJS sets the port to \"0\" when using the file: protocol.\n  port = port == '0' ? '' : port;\n\n  // Sometimes IE incorrectly includes a port for default ports\n  // (e.g. `:80` or `:443`) even when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  const host = a.host.replace(DEFAULT_PORT, '');\n\n  // Not all browser support `origin` so we have to build it.\n  const origin = a.origin ? a.origin : a.protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  const pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    pathname: pathname,\n    port: port,\n    protocol: a.protocol,\n    search: a.search,\n  };\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {getAttributes} from 'dom-utils';\nimport MethodChain from './method-chain';\n\n\n/**\n * Accepts default and user override fields and an optional tracker, hit\n * filter, and target element and returns a single object that can be used in\n * `ga('send', ...)` commands.\n * @param {FieldsObj} defaultFields The default fields to return.\n * @param {FieldsObj} userFields Fields set by the user to override the\n *     defaults.\n * @param {Tracker=} tracker The tracker object to apply the hit filter to.\n * @param {Function=} hitFilter A filter function that gets\n *     called with the tracker model right before the `buildHitTask`. It can\n *     be used to modify the model for the current hit only.\n * @param {Element=} target If the hit originated from an interaction\n *     with a DOM element, hitFilter is invoked with that element as the\n *     second argument.\n * @param {(Event|TwttrEvent)=} event If the hit originated via a DOM event,\n *     hitFilter is invoked with that event as the third argument.\n * @return {!FieldsObj} The final fields object.\n */\nexport function createFieldsObj(\n    defaultFields, userFields, tracker = undefined,\n    hitFilter = undefined, target = undefined, event = undefined) {\n  if (typeof hitFilter == 'function') {\n    const originalBuildHitTask = tracker.get('buildHitTask');\n    return {\n      buildHitTask: (/** @type {!Model} */ model) => {\n        model.set(defaultFields, null, true);\n        model.set(userFields, null, true);\n        hitFilter(model, target, event);\n        originalBuildHitTask(model);\n      },\n    };\n  } else {\n    return assign({}, defaultFields, userFields);\n  }\n}\n\n\n/**\n * Retrieves the attributes from an DOM element and returns a fields object\n * for all attributes matching the passed prefix string.\n * @param {Element} element The DOM element to get attributes from.\n * @param {string} prefix An attribute prefix. Only the attributes matching\n *     the prefix will be returned on the fields object.\n * @return {FieldsObj} An object of analytics.js fields and values\n */\nexport function getAttributeFields(element, prefix) {\n  const attributes = getAttributes(element);\n  const attributeFields = {};\n\n  Object.keys(attributes).forEach(function(attribute) {\n    // The `on` prefix is used for event handling but isn't a field.\n    if (attribute.indexOf(prefix) === 0 && attribute != prefix + 'on') {\n      let value = attributes[attribute];\n\n      // Detects Boolean value strings.\n      if (value == 'true') value = true;\n      if (value == 'false') value = false;\n\n      const field = camelCase(attribute.slice(prefix.length));\n      attributeFields[field] = value;\n    }\n  });\n\n  return attributeFields;\n}\n\n\n/**\n * Accepts a function to be invoked once the DOM is ready. If the DOM is\n * already ready, the callback is invoked immediately.\n * @param {!Function} callback The ready callback.\n */\nexport function domReady(callback) {\n  if (document.readyState == 'loading') {\n    document.addEventListener('DOMContentLoaded', function fn() {\n      document.removeEventListener('DOMContentLoaded', fn);\n      callback();\n    });\n  } else {\n    callback();\n  }\n}\n\n\n/**\n * Returns a function, that, as long as it continues to be called, will not\n * actually run. The function will only run after it stops being called for\n * `wait` milliseconds.\n * @param {!Function} fn The function to debounce.\n * @param {number} wait The debounce wait timeout in ms.\n * @return {!Function} The debounced function.\n */\nexport function debounce(fn, wait) {\n  let timeout;\n  return function(...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), wait);\n  };\n}\n\n\n/**\n * Accepts a function and returns a wrapped version of the function that is\n * expected to be called elsewhere in the system. If it's not called\n * elsewhere after the timeout period, it's called regardless. The wrapper\n * function also prevents the callback from being called more than once.\n * @param {!Function} callback The function to call.\n * @param {number=} wait How many milliseconds to wait before invoking\n *     the callback.\n * @return {!Function} The wrapped version of the passed function.\n */\nexport function withTimeout(callback, wait = 2000) {\n  let called = false;\n  const fn = function() {\n    if (!called) {\n      called = true;\n      callback();\n    }\n  };\n  setTimeout(fn, wait);\n  return fn;\n}\n\n// Maps trackers to queue by tracking ID.\nconst queueMap = {};\n\n/**\n * Queues a function for execution in the next call stack, or immediately\n * before any send commands are executed on the tracker. This allows\n * autotrack plugins to defer running commands until after all other plugins\n * are required but before any other hits are sent.\n * @param {!Tracker} tracker\n * @param {!Function} fn\n */\nexport function deferUntilPluginsLoaded(tracker, fn) {\n  const trackingId = tracker.get('trackingId');\n  const ref = queueMap[trackingId] = queueMap[trackingId] || {};\n\n  const processQueue = () => {\n    clearTimeout(ref.timeout);\n    if (ref.send) {\n      MethodChain.remove(tracker, 'send', ref.send);\n    }\n    delete queueMap[trackingId];\n\n    ref.queue.forEach((fn) => fn());\n  };\n\n  clearTimeout(ref.timeout);\n  ref.timeout = setTimeout(processQueue, 0);\n  ref.queue = ref.queue || [];\n  ref.queue.push(fn);\n\n  if (!ref.send) {\n    ref.send = (originalMethod) => {\n      return (...args) => {\n        processQueue();\n        originalMethod(...args);\n      };\n    };\n    MethodChain.add(tracker, 'send', ref.send);\n  }\n}\n\n\n/**\n * A small shim of Object.assign that aims for brevity over spec-compliant\n * handling all the edge cases.\n * @param {!Object} target The target object to assign to.\n * @param {...?Object} sources Additional objects who properties should be\n *     assigned to target. Non-objects are converted to objects.\n * @return {!Object} The modified target object.\n */\nexport const assign = Object.assign || function(target, ...sources) {\n  for (let i = 0, len = sources.length; i < len; i++) {\n    const source = Object(sources[i]);\n    for (let key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\n\n\n/**\n * Accepts a string containing hyphen or underscore word separators and\n * converts it to camelCase.\n * @param {string} str The string to camelCase.\n * @return {string} The camelCased version of the string.\n */\nexport function camelCase(str) {\n  return str.replace(/[\\-\\_]+(\\w?)/g, function(match, p1) {\n    return p1.toUpperCase();\n  });\n}\n\n\n/**\n * Capitalizes the first letter of a string.\n * @param {string} str The input string.\n * @return {string} The capitalized string\n */\nexport function capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\n/**\n * Indicates whether the passed variable is a JavaScript object.\n * @param {*} value The input variable to test.\n * @return {boolean} Whether or not the test is an object.\n */\nexport function isObject(value) {\n  return typeof value == 'object' && value !== null;\n}\n\n\n/**\n * Accepts a value that may or may not be an array. If it is not an array,\n * it is returned as the first item in a single-item array.\n * @param {*} value The value to convert to an array if it is not.\n * @return {!Array} The array-ified value.\n */\nexport function toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\n\n/**\n * @return {number} The current date timestamp\n */\nexport function now() {\n  return +new Date();\n}\n\n\n/*eslint-disable */\n// https://gist.github.com/jed/982883\n/** @param {?=} a */\nexport const uuid = function b(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)};\n/*eslint-enable */\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {DEV_ID} from './constants';\nimport {capitalize} from './utilities';\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed or not yet defined.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nexport default function provide(pluginName, pluginConstructor) {\n  const gaAlias = window.GoogleAnalyticsObject || 'ga';\n  window[gaAlias] = window[gaAlias] || function(...args) {\n    (window[gaAlias].q = window[gaAlias].q || []).push(args);\n  };\n\n  // Adds the autotrack dev ID if not already included.\n  window.gaDevIds = window.gaDevIds || [];\n  if (window.gaDevIds.indexOf(DEV_ID) < 0) {\n    window.gaDevIds.push(DEV_ID);\n  }\n\n  // Formally provides the plugin for use with analytics.js.\n  window[gaAlias]('provide', pluginName, pluginConstructor);\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  window.gaplugins[capitalize(pluginName)] = pluginConstructor;\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {USAGE_PARAM, VERSION, VERSION_PARAM} from './constants';\n\n\nexport const plugins = {\n  CLEAN_URL_TRACKER: 1,\n  EVENT_TRACKER: 2,\n  IMPRESSION_TRACKER: 3,\n  MEDIA_QUERY_TRACKER: 4,\n  OUTBOUND_FORM_TRACKER: 5,\n  OUTBOUND_LINK_TRACKER: 6,\n  PAGE_VISIBILITY_TRACKER: 7,\n  SOCIAL_WIDGET_TRACKER: 8,\n  URL_CHANGE_TRACKER: 9,\n  MAX_SCROLL_TRACKER: 10,\n};\n\n\nconst PLUGIN_COUNT = Object.keys(plugins).length;\n\n\n/**\n * Tracks the usage of the passed plugin by encoding a value into a usage\n * string sent with all hits for the passed tracker.\n * @param {!Tracker} tracker The analytics.js tracker object.\n * @param {number} plugin The plugin enum.\n */\nexport function trackUsage(tracker, plugin) {\n  trackVersion(tracker);\n  trackPlugin(tracker, plugin);\n}\n\n\n/**\n * Converts a hexadecimal string to a binary string.\n * @param {string} hex A hexadecimal numeric string.\n * @return {string} a binary numeric string.\n */\nfunction convertHexToBin(hex) {\n  return parseInt(hex || '0', 16).toString(2);\n}\n\n\n/**\n * Converts a binary string to a hexadecimal string.\n * @param {string} bin A binary numeric string.\n * @return {string} a hexadecimal numeric string.\n */\nfunction convertBinToHex(bin) {\n  return parseInt(bin || '0', 2).toString(16);\n}\n\n\n/**\n * Adds leading zeros to a string if it's less than a minimum length.\n * @param {string} str A string to pad.\n * @param {number} len The minimum length of the string\n * @return {string} The padded string.\n */\nfunction padZeros(str, len) {\n  if (str.length < len) {\n    let toAdd = len - str.length;\n    while (toAdd) {\n      str = '0' + str;\n      toAdd--;\n    }\n  }\n  return str;\n}\n\n\n/**\n * Accepts a binary numeric string and flips the digit from 0 to 1 at the\n * specified index.\n * @param {string} str The binary numeric string.\n * @param {number} index The index to flip the bit.\n * @return {string} The new binary string with the bit flipped on\n */\nfunction flipBitOn(str, index) {\n  return str.substr(0, index) + 1 + str.substr(index + 1);\n}\n\n\n/**\n * Accepts a tracker and a plugin index and flips the bit at the specified\n * index on the tracker's usage parameter.\n * @param {Object} tracker An analytics.js tracker.\n * @param {number} pluginIndex The index of the plugin in the global list.\n */\nfunction trackPlugin(tracker, pluginIndex) {\n  const usageHex = tracker.get('&' + USAGE_PARAM);\n  let usageBin = padZeros(convertHexToBin(usageHex), PLUGIN_COUNT);\n\n  // Flip the bit of the plugin being tracked.\n  usageBin = flipBitOn(usageBin, PLUGIN_COUNT - pluginIndex);\n\n  // Stores the modified usage string back on the tracker.\n  tracker.set('&' + USAGE_PARAM, convertBinToHex(usageBin));\n}\n\n\n/**\n * Accepts a tracker and adds the current version to the version param.\n * @param {Object} tracker An analytics.js tracker.\n */\nfunction trackVersion(tracker) {\n  tracker.set('&' + VERSION_PARAM, VERSION);\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport MethodChain from '../method-chain';\nimport provide from '../provide';\nimport {plugins, trackUsage} from '../usage';\nimport {assign, createFieldsObj} from '../utilities';\n\n\n/**\n * Class for the `urlChangeTracker` analytics.js plugin.\n * @implements {UrlChangeTrackerPublicInterface}\n */\nclass UrlChangeTracker {\n  /**\n   * Adds handler for the history API methods\n   * @param {!Tracker} tracker Passed internally by analytics.js\n   * @param {?Object} opts Passed by the require command.\n   */\n  constructor(tracker, opts) {\n    trackUsage(tracker, plugins.URL_CHANGE_TRACKER);\n\n    // Feature detects to prevent errors in unsupporting browsers.\n    if (!history.pushState || !window.addEventListener) return;\n\n    /** @type {UrlChangeTrackerOpts} */\n    const defaultOpts = {\n      shouldTrackUrlChange: this.shouldTrackUrlChange,\n      trackReplaceState: false,\n      fieldsObj: {},\n      hitFilter: null,\n    };\n\n    this.opts = /** @type {UrlChangeTrackerOpts} */ (assign(defaultOpts, opts));\n\n    this.tracker = tracker;\n\n    // Sets the initial page field.\n    // Don't set this on the tracker yet so campaign data can be retreived\n    // from the location field.\n    this.path = getPath();\n\n    // Binds methods.\n    this.pushStateOverride = this.pushStateOverride.bind(this);\n    this.replaceStateOverride = this.replaceStateOverride.bind(this);\n    this.handlePopState = this.handlePopState.bind(this);\n\n    // Watches for history changes.\n    MethodChain.add(history, 'pushState', this.pushStateOverride);\n    MethodChain.add(history, 'replaceState', this.replaceStateOverride);\n    window.addEventListener('popstate', this.handlePopState);\n  }\n\n  /**\n   * Handles invocations of the native `history.pushState` and calls\n   * `handleUrlChange()` indicating that the history updated.\n   * @param {!Function} originalMethod A reference to the overridden method.\n   * @return {!Function}\n   */\n  pushStateOverride(originalMethod) {\n    return (...args) => {\n      originalMethod(...args);\n      this.handleUrlChange(true);\n    };\n  }\n\n  /**\n   * Handles invocations of the native `history.replaceState` and calls\n   * `handleUrlChange()` indicating that history was replaced.\n   * @param {!Function} originalMethod A reference to the overridden method.\n   * @return {!Function}\n   */\n  replaceStateOverride(originalMethod) {\n    return (...args) => {\n      originalMethod(...args);\n      this.handleUrlChange(false);\n    };\n  }\n\n  /**\n   * Handles responding to the popstate event and calls\n   * `handleUrlChange()` indicating that history was updated.\n   */\n  handlePopState() {\n    this.handleUrlChange(true);\n  }\n\n  /**\n   * Updates the page and title fields on the tracker and sends a pageview\n   * if a new history entry was created.\n   * @param {boolean} historyDidUpdate True if the history was changed via\n   *     `pushState()` or the `popstate` event. False if the history was just\n   *     modified via `replaceState()`.\n   */\n  handleUrlChange(historyDidUpdate) {\n    // Calls the update logic asychronously to help ensure that app logic\n    // responding to the URL change happens prior to this.\n    setTimeout(() => {\n      const oldPath = this.path;\n      const newPath = getPath();\n\n      if (oldPath != newPath &&\n          this.opts.shouldTrackUrlChange.call(this, newPath, oldPath)) {\n        this.path = newPath;\n        this.tracker.set({\n          page: newPath,\n          title: document.title,\n        });\n\n        if (historyDidUpdate || this.opts.trackReplaceState) {\n          /** @type {FieldsObj} */\n          const defaultFields = {transport: 'beacon'};\n          this.tracker.send('pageview', createFieldsObj(defaultFields,\n              this.opts.fieldsObj, this.tracker, this.opts.hitFilter));\n        }\n      }\n    }, 0);\n  }\n\n  /**\n   * Determines whether or not the tracker should send a hit with the new page\n   * data. This default implementation can be overrided in the config options.\n   * @param {string} newPath The path after the URL change.\n   * @param {string} oldPath The path prior to the URL change.\n   * @return {boolean} Whether or not the URL change should be tracked.\n   */\n  shouldTrackUrlChange(newPath, oldPath) {\n    return !!(newPath && oldPath);\n  }\n\n  /**\n   * Removes all event listeners and restores overridden methods.\n   */\n  remove() {\n    MethodChain.remove(history, 'pushState', this.pushStateOverride);\n    MethodChain.remove(history, 'replaceState', this.replaceStateOverride);\n    window.removeEventListener('popstate', this.handlePopState);\n  }\n}\n\n\nprovide('urlChangeTracker', UrlChangeTracker);\n\n\n/**\n * @return {string} The path value of the current URL.\n */\nfunction getPath() {\n  return location.pathname + location.search;\n}\n","import { Point } from \"./Point.js\";\nimport {\n  log,\n  logging\n} from \"./utils.js\"\nimport 'autotrack/lib/plugins/url-change-tracker';\n\n\nwindow.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;\nga('create', 'UA-141491749-1', 'auto');\n\n// Replace the following lines with the plugins you want to use.\nga('require', 'urlChangeTracker');\n// ...\n\nga('send', 'pageview');\n\nexport var darworms = {\n  version: \"0.9.5\",\n  // rollup.config  plugin replaces this by current date/time milliseconds\n  builddate: DATE,\n  // host: \"localhost:5000\",\n  host: \"https://darworms.com\",\n  compassPts: [\"e\", \"se\", \"sw\", \"w\", \"nw\", \"ne\", \"unSet\", \"isTrapped\", \"ai\"],\n  gameStates: {\n    \"over\": 0,\n    \"running\": 1,\n    \"waiting\": 2,\n    \"paused\": 3,\n    \"animToUI\": 4,\n    \"animFromUI\": 5\n  },\n  wormStates: {\n    \"dead\": 0,\n    \"moving\": 1,\n    \"paused\": 2,\n    \"sleeping\": 3,\n    \"dying\": 4 //  dead but let the game keep going for a few frames to animate\n  },\n  wormStateNames: [\"dead\", \"moving\", \"paused\", \"sleeping\", \"dying\"],\n  initialWormStates: [3, 2, 2, 2],\n  themes: [\"c\", \"d\", \"e\", \"f\"],\n  selectedIdx: 0,\n  gameStateNames: [\"over\", \"running\", \"waiting\", \"paused\", \"to_ui\", \"from_ui\"],\n  outMask: [1, 2, 4, 8, 16, 32],\n  inMask: [8, 16, 32, 1, 2, 4],\n  colorNames: ['red', 'green', 'blue', 'yellow'],\n  buttonSelectors: ['#p1button', '#p2button', '#p3button', '#p4button'],\n  buttonLSelectors: ['#p1Lbutton', '#p2Lbutton', '#p3Lbutton', '#p4Lbutton'],\n  inDir: [3, 4, 5, 0, 1, 2],\n  wCanvasPixelDim: [0, 0],\n  wCanvasRef: undefined,\n  minTwoColumnWidth: 480,\n  leftColumnWidth: 320,\n  screens: {},\n  pickCells: [],\n  graphics: {\n    timer: undefined,\n    scorectx: undefined,\n    animFrame: 0,\n    uiFrames: 0,\n    rawFrameCount: 0,\n    drawFrameCount: 0,\n    uiFrameCount: 0,\n    xPts: [0.5, 0.25, -0.25, -0.5, -0.25, 0.25],\n    yPts: [0.0, 0.5, 0.5, 0.0, -0.5, -0.5],\n    fps: 4,  //  initial frame rate\n    frameInterval: 33.33333,\n    uifps: 30,\n    uiInterval: 33.33333,\n    startTime: 0,\n    now: 0,\n    then: 0,\n    uiThen: 0,\n    elapsed: 0,\n    uiElapsed: 0,\n    vertex_x: [0.5, 0.5, 0, -0.5, -0.5, 0],\n    vertex_fudge: 0.12,\n    vertex_y: [0.3125, -0.3125, -0.6875, -0.3125, 0.3125, 0.6875],\n    hexSize: 1.0,\n    sqrt3: Math.sqrt(3),\n    dyningAnimationFrames: 8\n\n  },\n  selectedDarworm: 0,\n  notes: {\n    C1: 0,\n    CS: 1,\n    DF: 1,\n    D: 2,\n    DS: 3,\n    EF: 3,\n    E: 4,\n    F: 5,\n    FS: 6,\n    GF: 6,\n    G: 7,\n    GS: 8,\n    FF: 8,\n    AF: 8,\n    A: 9,\n    AS: 10,\n    BF: 10,\n    B: 11,\n    C2: 12\n  },\n\n  dwsettings: {   //  User adjustable settings\n    forceInitialGridSize: true,\n    largeGridSize: 18, // The original Atari 800 Character mode\n    smallGridSize: 10, // so cells can be selected with touch\n    tinyGridSize: 8,\n\n    minLargeScreenWidth: 800, //\n    maxSmallSreenWidth: 500,\n    isLargeScreen: true,\n    doAudio: 1,\n    fixedInitPos: true,\n    pickDirectionUI: 0,\n    noWhere: undefined,\n    gridGeometry: \"torus\",\n    codons: {\n      \"e\": 0,\n      \"ne\": 1,\n      \"nw\": 2,\n      \"w\": 3,\n      \"sw\": 4,\n      \"se\": 5,\n      \"unSet\": 6,\n      \"isTrapped\": 7,\n      \"smart\": 8   //  ai at run time will decide direction\n    },\n    colorTable: [\"#000000\", \"#EE0000\", \"#00EE00\", \"#0404EE\",\n      \"#D0A000\", \"#448833\", \"#443388\", \"#338844\",\n      \"#FF1C0A\", \"#1CFF0A\", \"#1C0AFF\", \"#0AFF1C\",\n      \"#884433\", \"#448833\", \"#443388\", \"#338844\"\n    ],\n    alphaColorTable: [\"rgba(  0,   0,   0, 0.2)\",\n      \"rgba(  238,   0,   0, 0.4)\", \"rgba(    0, 128,   0, 0.4)\", \"rgba(    0,   0, 238, 0.4)\", \"rgba(  200, 200, 0, 0.4)\",\n      \"#FFD70080\", \"#5fa40480\", \"#44338880\", \"#33884480\",\n      \"#FF1C0A80\", \"#1CFF0A80\", \"#1C0AFF80\", \"#0AFF1C80\",\n      \"#88443380\", \"#44883380\", \"#44338880\", \"#33884480\"\n    ],\n    backGroundTheme: 0,\n    doAnimations: true,\n    gridBackground: [\"#F5F5F5\", \"#404040\"],\n    cellBackground: [\"#F5F5F5\", \"#404040\"],\n    masterAudioVolume: 0.3,\n    // Note  env is set by the rollup-plugin-replace at build time\n    dologging: ENV,\n    gridSize: 18\n  },\n  images: {},\n  audioContext: undefined,\n  masterGainNode: undefined,\n\n  audioPanner: undefined,\n  audioSamples: [],\n  // an array of 12 playback rates ranging from 0.5 to 1.0\n  // this gives 12 notes from an octave in an equal tempered scale.\n  audioPlaybackRates: [],\n  audioFrequencies: [],\n  audiosamplefiles: [\n    [ 'kalimba' , \"sounds/Roland-SC-88-Kalimba-C5.wav\" ],\n    [ 'piano' ,   \"sounds/piano-c2.wav\" ],\n    [ 'guitar' , \"sounds/Alesis-Fusion-Nylon-String-Guitar-C4.wav\"],\n    [ 'bass'   ,  \"sounds/Alesis-Fusion-Acoustic-Bass-C2.wav\"],\n    [ 'violin' , \"sounds/Casio-VZ-10M-Pizzicato-Bell-C4.wav\"],\n    [ 'flute' ,   \"sounds/1980s-Casio-Flute-C5.wav\" ],\n    [ 'flute2' ,   \"sounds/E-Mu-Proteus-2-Flute-C5.wav\" ],\n    [ 'koto'   , \"sounds/Ensoniq-ESQ-1-Koto-C5.wav\"],\n    [ 'sitar' ,   \"sounds/Sitar-C5.wav\" ],\n    [ 'alto piano', 'sounds/Ensoniq-SD-1-Electric-Piano-C6.wav'],\n    [ 'bongo', 'sounds/Hi-Bongo.wav'],\n    [ 'muted ' ,   \"sounds/darworm-death.wav\"]\n  ],\n  gameTxt: null\n  // gameTxt: '{\"version\":\"0.9.1\",\"createdAt\":\"Fri May 10 2019 21:33:43 GMT-0700 (Pacific Daylight Time)\",\"numMoves\":263,\"numTurns\":83,\"width\":10,\"backGroundTheme\":\"1\",\"doAnimations\":true,\"doAudio\":\"1\",\"gridGeometry\":\"torus\",\"fixedInitPos\":\"1\",\"pickDirectionUI\":\"0\",\"masterAudioVolume\":0.3,\"fps\":\"30\",\"players\":[{\"index\":0,\"typeName\":\"Random\",\"startingPos\":{\"x\":5,\"y\":5},\"name\":\"FBFEBEEDCBFFEFFFDDDCFDADBFFFABFFBBDCBBAECEAEAEAEDCADBDADACACBBAX\",\"score\":14,\"instrument\":0,\"musickeyName\":\"CMajor\",\"MusicScale\":[0,2,4,5,7,9,11]},{\"index\":1,\"typeName\":\"Random\",\"startingPos\":{\"x\":5,\"y\":5},\"name\":\"DCEEADEEEBCFEFFEFBCDBFFFFBFFAFFFBDADAEADBEAEABAECDDDADDDBBACABAX\",\"score\":13,\"instrument\":0,\"musickeyName\":\"CMajor\",\"MusicScale\":[0,2,4,5,7,9,11]},{\"index\":2,\"typeName\":\"Random\",\"startingPos\":{\"x\":5,\"y\":5},\"name\":\"BCFDEDEECBACFBAFCCDCDFADCCCFABAFDEDEEDADBECCEEEEABDDBBADCBCCABAX\",\"score\":22,\"instrument\":0,\"musickeyName\":\"CMajor\",\"MusicScale\":[0,2,4,5,7,9,11]},{\"index\":3,\"typeName\":\"Random\",\"startingPos\":{\"x\":5,\"y\":5},\"name\":\"AEDCFDFDECAEEBEFCFFDFFDDFBFFBFAFDBEEAEADEEACAEAEADADBBADBCACABAX\",\"score\":17,\"instrument\":0,\"musickeyName\":\"CMajor\",\"MusicScale\":[0,2,4,5,7,9,11]}]}'\n};\n\nwindow.addEventListener(\"load\", function() {\n    // if(logging()) console.log(\" stage 1 loading finished\");\n    window.onerror = function(msg, url, line) {\n      alert(msg + \" \" + url + \" \" + line);\n    }\n    $(\"[data-darworm='selector']\").on('pageshow', darworms.main.setupEditPage);\n    $(\"[data-darworm='selector']\").on('pagehide', darworms.main.setSelectedDarwormType);\n    $(\"#settingspage\").on('pageshow', darworms.main.showSettings);\n    $(\"#settingspage\").on('pagebeforeshow', darworms.main.setupGridGeometry);\n    $(\"#settingspage\").on('pagehide', darworms.main.applySettings);\n    $(\"#playpage\").on('pageshow', darworms.main.initPlayPage);\n    $(\"#playpage\").on('pagehide', darworms.main.leavePlayPage);\n    $(\"#edit-darworm-page\").on('pageshow', darworms.main.initEditPage);\n    $(\"#edit-darworm-page\").on('pagehide', darworms.main.leaveditPage);\n    $(\"#loadsavepage\").on('pageshow', darworms.main.loadSavedGames);\n    $(\"#loadsavepage\").on('pagehide', darworms.main.freeSavedGames);\n    $(\"#aboutpage\").on('pageshow', darworms.main.sendAnalytics);\n    $(\"#debugpage\").on('pageshow', darworms.main.sendAnalytics);\n    $(\"#emailpage\").on('pageshow', darworms.main.sendAnalytics);\n\n    $( \"#tutorialpopup\" ).popup({\n        afterclose: function( event, ui ) {\n          if(logging()) console.log(\" afterclose even fired\" + $('#tutorialpopup input[type=checkbox]').prop(\"checked\"));\n          if ( $('#tutorialpopup input[type=checkbox]').prop(\"checked\") ) {\n            darworms.theGame.focusWorm.showTutorial = false;\n          }\n        }\n    });\n    if(logging()) console.log(\"About to call darworms.main.init()\");\n    window.darworms = darworms;  // So index.html onclick can find handlers\n    darworms.main.init();\n\n  }\n\n);\n","/**\n * Created by dmaynard on 1/19/15.\n */\nimport { darworms } from \"./loader.js\";\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n\nexport default function AudioSample(name, location) {\n    this.location = location;\n    this.name = name;\n    this.incomingbuffer = undefined;\n    this.savedBuffer = undefined;\n    var xhr = new XMLHttpRequest();\n    xhr.open('get',location, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onload = (function () {\n        darworms.audioContext.decodeAudioData(xhr.response,\n            (function(incomingBuffer) {\n                // if(logging()) console.log( \"on Load incoming Buffer\");\n                // if(logging()) console.log(\" xhr \" + xhr.status + \"  \" + xhr.statusText);\n                // if(logging()) console.log(\" incoming buffer = \" + incomingBuffer );\n                // log ( \" this.name \" + this.name);\n                this.savedBuffer = incomingBuffer; // Save the buffer, we'll reuse it\n            }\n        ).bind(this));\n    }).bind(this);\n    xhr.send();\n    darworms.audioSamples.push(this);\n}\n\nAudioSample.prototype.playSample = function (rate, pan) {\n    var source;\n    // if(logging()) console.log(\" playSample \" + this.name + \"  \" + this.location + \"  savedBuffer \" + this.savedBuffer);\n    if (darworms.audioContext !== undefined && this.savedBuffer !== undefined) {\n        // Do we have to create a new buffer every time we play a note ?\n        source = darworms.audioContext.createBufferSource();\n        source.buffer = this.savedBuffer;\n        darworms.masterGainNode.gain.value = darworms.dwsettings.masterAudioVolume;\n        source.connect(darworms.masterGainNode);\n        // if(logging()) console.log(\" playSample \" + this.name + \" volume  \" + darworms.masterGainNode.gain.value);\n        if ( darworms.audioPanner !== undefined ) {\n          darworms.masterGainNode.connect(darworms.audioPanner);\n          darworms.audioPanner.connect(darworms.audioContext.destination);\n        }\n        else {\n          darworms.masterGainNode.connect(darworms.audioContext.destination);\n        }\n\n        if ( darworms.audioPanner !== undefined ) {\n          darworms.audioPanner.pan.value = (pan * 0.80) ;  // jump cut is too harsh\n        }\n        source.start(0); // Play sound immediately. Renamed source.start from source.noteOn\n        if (rate ) {\n          source.playbackRate.value = rate;\n        }\n\n    }\n};\n","import { Point } from \"./Point.js\";\nimport { darworms } from \"./loader.js\";\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n/**\n * Created with JetBrains WebStorm.\n * User: dmaynard\n * Date: 9/21/13\n * Time: 11:57 PM\n * To change this template use File | Settings | File Templates.\n */\n/*    Grid   */\n\n  const evenRowVec = [ {x: 1,y: 0}, {x: 0,y: 1}, {x:-1,y: 1},\n                       {x:-1,y: 0}, {x:-1,y:-1}, {x: 0,y:-1}]\n\n  const oddRowVec = [ {x: 1,y: 0}, {x: 1,y: 1}, {x:0,y: 1},\n                      {x:-1,y: 0}, {x: 0,y:-1}, {x: 1,y:-1}]\n\n  //  although we reserve 4 bits for each direction we actually only use 3 bits\n  const spokeMask = [0xFFFFFFF0,\n    0xFFFFFF0F,\n    0xFFFFF0FF,\n    0xFFFF0FFF,\n    0xFFF0FFFF,\n    0xFF0FFFFF,\n    0xF0FFFFFF,\n    0x0FFFFFFF\n  ];\n  // sink mask is high bit of spoke 6\n  const sinkMask = 0x08000000;\n\n  export class  Grid {\n  constructor (width, height) {\n    this.width = Math.floor(width);\n    this.height = Math.floor(height);\n\n    //  Cell Format   8 bits each:  in-spoke eaten, out-spoke eaten, spoke eaten\n    this.cells = new Array(width * height);\n\n    //  7 * 4 bits of color index info for color of each spoke and center\n    this.colors = new Array(width * height);\n    this.clear();\n  }\n\n  clear () {\n    for (var i = 0; i < this.cells.length; i++) this.cells[i] = 0;\n    for (var i = 0; i < this.colors.length; i++) this.colors[i] = 0;\n    // We implement reflecting at grid edges by\n    // filling all of the spokes that would leave\n    // the grid or wrap\n    if (darworms.dwsettings.gridGeometry == 'reflect') {\n      for (var i = 0; i < this.width; i = i + 1) {\n        var topPoint = new Point(i, 0);\n        var botPoint = new Point(i, this.height - 1);\n\n        this.setValueAt(topPoint, this.valueAt(topPoint) | darworms.outMask[4] | darworms.outMask[5]); // block up\n        this.setValueAt(topPoint, this.valueAt(topPoint) | ((this.valueAt(topPoint) & 0x3F) << 8)); // set outvec\n        this.setSpokeAt(topPoint, 4, 0);\n        this.setSpokeAt(topPoint, 5, 0);\n        this.setSpokeAt(topPoint, 6, 0);\n        this.setValueAt(botPoint, this.valueAt(botPoint) | darworms.outMask[1] | darworms.outMask[2]); // block down\n        this.setValueAt(botPoint, this.valueAt(botPoint) | ((this.valueAt(botPoint) & 0x3F) << 8)); // set outvecs\n        this.setSpokeAt(botPoint, 1, 0);\n        this.setSpokeAt(botPoint, 2, 0);\n        this.setSpokeAt(botPoint, 6, 0);\n\n      }\n      for (var j = 0; j < this.height; j = j + 1) {\n        var leftPoint = new Point(0, j);\n        var rightPoint = new Point(this.width - 1, j);\n\n        if ((j & 1) == 0) { // even rows shifted left 1/2 cell\n          this.setValueAt(leftPoint, this.valueAt(leftPoint) | darworms.outMask[2] | darworms.outMask[3] | darworms.outMask[4]); // block left\n          this.setValueAt(leftPoint, this.valueAt(leftPoint) | ((this.valueAt(leftPoint) & 0x3F) << 8)); // set outvecs\n          this.setSpokeAt(leftPoint, 2, 0);\n          this.setSpokeAt(leftPoint, 3, 0);\n          this.setSpokeAt(leftPoint, 4, 0);\n          this.setSpokeAt(leftPoint, 6, 0);\n          this.setValueAt(rightPoint, this.valueAt(rightPoint) | darworms.outMask[0]); //block right\n          this.setValueAt(rightPoint, this.valueAt(rightPoint) | ((this.valueAt(rightPoint) & 0x3F) << 8)); // set outvecs\n          this.setSpokeAt(rightPoint, 0, 0);\n          this.setSpokeAt(rightPoint, 6, 0);\n        } else { // odd rows shifted right on cell\n          this.setValueAt(leftPoint, this.valueAt(leftPoint) | darworms.outMask[3]); // block left\n          this.setValueAt(leftPoint, this.valueAt(leftPoint) | ((this.valueAt(leftPoint) & 0x3F) << 8)); // set outvecs\n          this.setSpokeAt(leftPoint, 3, 0);\n          this.setSpokeAt(leftPoint, 6, 0);\n          this.setValueAt(rightPoint, this.valueAt(rightPoint) | darworms.outMask[5] | darworms.outMask[0] | darworms.outMask[1]); //block right\n          this.setValueAt(rightPoint, this.valueAt(rightPoint) | ((this.valueAt(rightPoint) & 0x3F) << 8)); // set outvecs\n          this.setSpokeAt(rightPoint, 5, 0);\n          this.setSpokeAt(rightPoint, 0, 0);\n          this.setSpokeAt(rightPoint, 1, 0);\n          this.setSpokeAt(rightPoint, 6, 0);\n        }\n      }\n    }\n  };\n  valueAt (point) {\n    return this.cells[point.y * this.width + point.x];\n  };\n  hexValueAt (point) {\n    return (\" 0x\" + (this.valueAt(point)).toString(16));\n  };\n  stateAt (point) {\n    return this.valueAt(point) & 0x3F;\n  };\n  outVectorsAt (point) {\n    return (this.valueAt(point) >> 8) & 0x3F;\n  };\n  inVectorsAt (point) {\n    return (this.valueAt(point) >> 16) & 0x3F;\n  };\n  spokeAt (point, dir) {\n    return (this.colors[point.y * this.width + point.x] >>> (dir * 4)) & 0x07;\n  };\n  colorsAt (point) {\n    return (this.colors[point.y * this.width + point.x]);\n  }\n\n  setSpokeAt (point, dir, colorIndex) {\n    this.colors[point.y * this.width + point.x] =\n      ((this.colors[point.y * this.width + point.x]) & spokeMask[dir]) |\n      ((colorIndex & 0x0F) << (dir * 4));\n\n  };\n  setValueAt (point, value) {\n    this.cells[point.y * this.width + point.x] = value;\n  };\n\n  setSinkAt (point) {\n    this.cells[point.y * this.width + point.x] =\n        (this.cells[point.y * this.width + point.x] ^ sinkMask);\n  };\n\n  isSink (point) {\n    return ( (this.cells[point.y * this.width + point.x] & sinkMask) !== 0);\n  };\n\n  isInside (point) {\n    return point.x >= 0 && point.y >= 0 &&\n      point.x < this.width && point.y < this.height;\n  };\n  move (from, to, dir, colorIndex) {\n    if ((this.inVectorsAt(to) & darworms.inMask[dir]) !== 0) {\n      alert(\" Attempted to eat eaten spoke at \" + to.format());\n      if(logging()) console.log(\"  (\" + to.x + \",\" + to.y + \") dir: \" + dir + \" value: \");\n      if(logging()) console.log(\"Attempted to eat eaten spoke at \" + to.format() + \" dir \" + dir + \" value: 0x\" + this.valueAt(to).toString(16));\n    }\n    this.setValueAt(to, this.valueAt(to) | darworms.inMask[dir] | (darworms.inMask[dir] << 16));\n    this.setValueAt(from, this.valueAt(from) | darworms.outMask[dir] | (darworms.outMask[dir] << 8));\n    this.setSpokeAt(from, dir, colorIndex);\n    this.setSpokeAt(from, 6, colorIndex);\n    this.setSpokeAt(to, darworms.inDir[dir], colorIndex);\n    this.setSpokeAt(to, 6, colorIndex);\n    var captures = 0;\n    if (this.stateAt(to) === 0x3f) {\n      this.setSpokeAt(to, 6, colorIndex);\n      this.setSpokeAt(to, 7, colorIndex);\n\n      captures = captures + 1;\n    }\n    if (this.stateAt(from) === 0x3f) {\n      this.setSpokeAt(from, 6, colorIndex);\n      this.setSpokeAt(from, 7, colorIndex);\n\n      captures = captures + 1;\n    }\n    return captures;\n  };\n  // Returns next x,y position\n  next (point, dir) {\n    var nP = new Point(point.x, point.y);\n    // log (\"  (\" + point.x  + \",\" + point.y + \") dir: \" + dir);\n    if ((point.y & 1) === 0) {\n      nP.add(evenRowVec[dir]);\n    } else {\n      nP.add(oddRowVec[dir]);\n    }\n    if ((darworms.dwsettings.gridGeometry == 'falloff' && ((nP.x < 0) || (nP.x > this.width - 1) || (nP.y < 0) || (nP.y > this.height - 1)))) {\n      // log (\"  (\" + nP.x  + \",\" + nP.y + \") returning noWhere\");\n      return darworms.dwsettings.noWhere;\n    }\n    if (nP.x < 0) {\n      nP.x = this.width - 1;\n    }\n    if (nP.x > this.width - 1) {\n      nP.x = 0;\n    }\n    if (nP.y < 0) {\n      nP.y = this.height - 1;\n    }\n    if (nP.y > this.height - 1) {\n      nP.y = 0;\n    }\n    // log (\"    next from: (\" + point.format()  + \" dir \" + dir + \" next:  \" + nP.format());\n    return nP;\n  };\n  each (action) {\n    for (var y = 0; y < this.height; y++) {\n      for (var x = 0; x < this.width; x++) {\n        var point = new Point(x, y);\n        action(point, this.valueAt(point));\n      }\n    }\n  };\n  logSpokesAt (point) {\n    if(logging()) console.log(\"[ \" + point.x + \",\" + point.y + \"] val = \" + this.colorsAt(point).toString(16));\n    for (var dir = 0; dir < 8; dir = dir + 1) {\n      if(logging()) console.log(\"   spoke: \" + dir + \" colorindex\" + this.spokeAt(point, dir));\n\n    }\n  };\n  logValueAt (point) {\n    if(logging()) console.log(\"[ \" + point.x + \",\" + point.y + \"] val = 0x\" + this.hexValueAt(point) +\n      this.dirList(this.hexValueAt(point)) + \" outVectors = 0x\" +\n      this.outVectorsAt(point).toString(16) + this.dirList(this.outVectorsAt(point)) +\n      \" inVectors = 0x\" + this.inVectorsAt(point).toString(16));\n  };\n  formatStateAt (point) {\n    return \" x \" + point.x + \" y \" + point.y + \" state 0x\" + this.stateAt(point).toString(16);\n  };\n  dirList (state) {\n    var list = \" directions \";\n    for (var dir = 0; dir < 6; dir = dir + 1) {\n      if (((state & darworms.outMask[dir]) !== 0)) {\n        list = list + \" \" + darworms.compassPts[dir];\n      }\n    }\n    return list;\n  }\n}\n\n\n/* end Grid */\n","//  Worm.js\nimport {\n  Point\n} from \"./Point.js\";\nimport {\n  darworms\n} from \"./loader.js\";\nimport {\n  log,\n  logging,\n  numOneBits\n} from \"./utils.js\"\n/**\n * Created with JetBrains WebStorm.\n * User: dmaynard\n * Date: 9/22/13\n * Time: 12:00 AM\n * To change this template use File | Settings | File Templates.\n */\n/* Worm Object */\n\nexport const musicalkeys = {\n  \"A Major\": [\n    darworms.notes.A,\n    darworms.notes.B,\n    darworms.notes.CS,\n    darworms.notes.D,\n    darworms.notes.E,\n    darworms.notes.FS,\n    darworms.notes.GS\n  ],\n  \"B Major\": [\n    darworms.notes.B,\n    darworms.notes.CS,\n    darworms.notes.DS,\n    darworms.notes.E,\n    darworms.notes.FS,\n    darworms.notes.GS,\n    darworms.notes.AS\n  ],\n  \"B Minor\": [\n    darworms.notes.B,\n    darworms.notes.CS,\n    darworms.notes.D,\n    darworms.notes.E,\n    darworms.notes.FS,\n    darworms.notes.G,\n    darworms.notes.A\n  ],\n  \"C Major\": [\n    darworms.notes.C1,\n    darworms.notes.D,\n    darworms.notes.E,\n    darworms.notes.F,\n    darworms.notes.G,\n    darworms.notes.A,\n    darworms.notes.B\n  ],\n  \"C Minor\": [\n    darworms.notes.C1,\n    darworms.notes.D,\n    darworms.notes.EF,\n    darworms.notes.F,\n    darworms.notes.G,\n    darworms.notes.AF,\n    darworms.notes.BF\n  ],\n\n  \"D Major\": [\n    darworms.notes.D,\n    darworms.notes.E,\n    darworms.notes.FS,\n    darworms.notes.G,\n    darworms.notes.A,\n    darworms.notes.B,\n    darworms.notes.CS\n  ],\n\n  \"E Major\": [\n    darworms.notes.E,\n    darworms.notes.FS,\n    darworms.notes.GS,\n    darworms.notes.A,\n    darworms.notes.B,\n    darworms.notes.CS,\n    darworms.notes.DS\n  ],\n  \"F Major\": [\n    darworms.notes.F,\n    darworms.notes.G,\n    darworms.notes.A,\n    darworms.notes.BF,\n    darworms.notes.C2,\n    darworms.notes.D,\n    darworms.notes.E\n  ],\n  \"F Minor\": [\n    darworms.notes.F,\n    darworms.notes.G,\n    darworms.notes.AF,\n    darworms.notes.BF,\n    darworms.notes.C2,\n    darworms.notes.DF,\n    darworms.notes.EF\n  ],\n  \"G Major\": [\n    darworms.notes.G,\n    darworms.notes.A,\n    darworms.notes.B,\n    darworms.notes.C2,\n    darworms.notes.D,\n    darworms.notes.E,\n    darworms.notes.FS\n  ],\n  \"G Minor\": [\n    darworms.notes.G,\n    darworms.notes.A,\n    darworms.notes.BF,\n    darworms.notes.C2,\n    darworms.notes.D,\n    darworms.notes.EF,\n    darworms.notes.F\n  ]\n};\n export const  dnaregx = /^[ABCDEF\\?\\*]{63}X$/;\nexport class Worm {\n  constructor(colorIndex, state) {\n    this.colorIndex = colorIndex;\n    this.dna = new Array(64);\n    this.state = state;\n    this.nMoves = 0;\n    this.score = 0;\n    this.prevScore = 0;\n    this.numChoices = 0;\n    this.died = false;\n    this.name = \"\";\n    this.wType = 0; // None (asleep)\n    this.typeName = \"\";\n    this.directionIndex = 0;\n    this.diedAtFrame = 0;\n    this.showTutorial = true;\n\n\n    this.musickeyName = \"C Major\";\n\n    this.MusicScale = [],\n\n      this.audioSamplesPtrs = [];\n    this.pos = new Point(-1, -1);\n    this.startingPos = new Point(-1, -1);\n\n    for (var i = 0; i < 64; i = i + 1) {\n      this.dna[i] = darworms.dwsettings.codons.unSet;\n    }\n\n    this.dna[63] = darworms.dwsettings.codons.isTrapped;\n    this.numChoices = 1;\n    // set all the forced moves\n    for (var j = 0; j < 6; j = j + 1) {\n      this.dna[0x3F ^ (1 << j)] = j;\n      this.numChoices += 1;\n    }\n    this.randomize();\n    this.toText();\n  }\n\n  init(wType) {\n    this.nMoves = 0;\n    this.score = 0;\n    this.prevScore = 0;\n    this.MusicScale = musicalkeys[\"C Major\"];\n    if (wType === 0) { // none   asleep\n      this.state = 3; // sleeping\n    }\n    if (wType === 1) { // random\n      for (var i = 0; i < 64; i = i + 1) {\n        this.dna[i] = darworms.dwsettings.codons.unSet;\n      }\n      this.dna[63] = darworms.dwsettings.codons.isTrapped;\n      this.numChoices = 1;\n      // set all the forced moves\n      for (var j = 0; j < 6; j = j + 1) {\n        this.dna[0x3F ^ (1 << j)] = j;\n        this.numChoices += 1;\n      }\n      this.randomize(); // sleeping\n    }\n    if (wType === 2) { // same\n      this.state = 2; // paused\n    }\n    if (wType === 3) { // new\n      for (var k = 0; k < 64; k = k + 1) {\n        this.dna[k] = darworms.dwsettings.codons.unSet;\n      }\n      this.dna[63] = darworms.dwsettings.codons.isTrapped;\n      this.numChoices = 1;\n      // set all the forced moves\n      for (var n = 0; n < 6; n = n + 1) {\n        this.dna[0x3F ^ (1 << n)] = n;\n        this.numChoices += 1;\n      }\n      this.state = 2; // paused\n    }\n    if (wType === 4) { // smart\n      for (var k = 0; k < 64; k = k + 1) {\n        this.dna[k] = darworms.dwsettings.codons.smart;\n      }\n      this.dna[63] = darworms.dwsettings.codons.isTrapped;\n      this.numChoices = 1;\n      // set all the forced moves\n      for (var n = 0; n < 6; n = n + 1) {\n        this.dna[0x3F ^ (1 << n)] = n;\n        this.numChoices += 1;\n      }\n      this.state = 2; // paused\n    }\n    this.toText();\n  };\n\n  setNotes(index) {\n    this.instrument = index;\n    this.audioSamplesPtrs.length = 0;\n    for (var j = 0; j < 7; j = j + 1) {\n      this.audioSamplesPtrs.push(index); // c2,wav\n    }\n\n  }\n  setKey(keyName) {\n    if(logging()) console.log(\" keyname: \" + keyName)\n    this.musickeyName = keyName;\n    this.MusicScale = musicalkeys[keyName];\n  }\n\n  playScale() {\n    for (var j = 0; j < 7; j = j + 1) {\n      darworms.directionIndex = j;\n      var sorted = this.MusicScale;\n      sorted.sort(function(a, b) {\n        return a - b;\n      });\n      setTimeout(function(that, index, notes) {\n        if (that.audioSamplesPtrs[index] >= 0) {\n          darworms.audioSamples[that.audioSamplesPtrs[index]].\n          playSample(darworms.audioPlaybackRates[notes[index]], 0.0);\n        }\n        //do what you need here\n      }, 500 * j, this, j, sorted);\n\n    }\n  }\n  getMoveDir(value) {\n    if (value === 0x3F) { // trapped\n      this.state = wormStates.dead;\n      this.died = true;\n      return 6;\n    }\n    return this.dna[value & 0x3F];\n  };\n  shouldDrawScore() {\n    if (this.score !== this.prevScore || (this.nMoves <= 2)) {\n      this.prevScore = this.score;\n      return true;\n    }\n    if (this.died) {\n      this.died = false; // one-shot\n      return true;\n    }\n    return false;\n  };\n  randomize() {\n    var dir;\n    for (var i = 0; i < 63; i = i + 1) {\n      // if(logging()) console.log(\" randomize loop start  i = \" + i + \" dna[i] = \" + this.dna[i]);\n      if (this.dna[i] === darworms.dwsettings.codons.unSet) {\n        for (var j = 0; j < 1000; j = j + 1) {\n          dir = Math.floor(Math.random() * 6);\n          //if(logging()) console.log( \" dir = \" + dir +  \" i=\" + i + \" outMask[dir] = \" + outMask[dir] + \"& = \" + (i & outMask[dir]));\n          if ((i & darworms.outMask[dir]) === 0) {\n            this.dna[i] = dir;\n            this.numChoices += 1;\n            // if(logging()) console.log(\" Setting dir 0x\" + i.toString(16) + \" to \" + compassPts[dir]);\n            break;\n          }\n        }\n        if (this.dna[i] === darworms.dwsettings.codons.unSet) {\n          if(logging()) console.log(\"Error we rolled craps 10,000 times in a row\");\n        }\n      }\n      // if(logging()) console.log(\" randomize loop end  i = \" + i + \" dna[i] = \" + this.dna[i]);\n    }\n    this.toText();\n  };\n  log() {\n    var dir;\n    if(logging()) console.log(\" Worm State: \" + darworms.wormStateNames[this.state] + \" at \" + (this.pos !== undefined ? this.pos.format() : \"position Undefined\"));\n  };\n  place(aState, aGame, pos) {\n    this.pos = pos;\n    this.startingPos = pos;\n    this.nMoves = 0;\n    this.score = 0;\n    this.state = aState;\n    if(logging()) console.log(\" placing worm   i = \" + this.colorIndex + \" state \" + aState + \" \" + this.numChoices + \" of 64 possible moves defined\");\n  };\n  dump() {\n    for (var i = 0; i < 64; i = i + 1) {\n      if(logging()) console.log(\" dna\" + i + \" = \" + darworms.compassPts[this.dna[i]]);\n      var spokes = [];\n      for (var spoke = 0; spoke < 6; spoke = spoke + 1) {\n        if ((i & darworms.outMask[spoke]) !== 0) {\n          spokes.push(darworms.compassPts[spoke]);\n        }\n      }\n      if(logging()) console.log(\" dna\" + i + \" \" + spokes + \" = \" + darworms.compassPts[this.dna[i]]);\n    }\n\n  };\n\n\n  toText() {\n    this.name = \"\";\n\n    for (var i = 0; i < 64; i = i + 1) {\n      if (this.dna[i] === 0) this.name += 'A';\n      if (this.dna[i] === 1) this.name += 'B';\n      if (this.dna[i] === 2) this.name += 'C';\n      if (this.dna[i] === 3) this.name += 'D';\n      if (this.dna[i] === 4) this.name += 'E';\n      if (this.dna[i] === 5) this.name += 'F';\n      if (this.dna[i] === 6) this.name += '?';\n      if (this.dna[i] === 7) this.name += 'X';\n      if (this.dna[i] === 8) this.name += '*';\n\n      if (this.dna[i] > 8) this.name += '#';\n    };\n    return this.name;\n  };\n\n  fromText(dnastring) {\n\n    if (!(dnaregx.test(dnastring))) {\n      alert(\"illegal character in dna  \" + dnastring );\n      gooddna = false;return false;\n    }\n    var gooddna = true;\n    for (var i = 0; i < 63; i = i + 1) {\n      switch (dnastring.charAt(i)) {\n        case 'A':\n          this.dna[i] = 0;\n          break;\n        case 'B':\n          this.dna[i] = 1;\n          break;\n        case 'C':\n          this.dna[i] = 2;\n          break;\n        case 'D':\n          this.dna[i] = 3;\n          break;\n        case 'E':\n          this.dna[i] = 4;\n          break;\n        case 'F':\n          this.dna[i] = 5;\n          break;\n        case '?':\n          this.dna[i] = 6;\n          break;\n        case '*':\n          this.dna[i] = 8;\n          break;\n\n        default:\n          alert(\" illegal dna string at position \" + (i + 1));\n          return (false);\n      }\n      if (!(((1 << this.dna[i]) & i) === 0) && (this.dna[i] !== 6) && (this.dna[i] !== 8)) {\n        alert(\"illegal direction \" + dnastring.charAt(i) + \" (\" + darworms.compassPts[this.dna[i]] +\n          \")\" + \"given for cell \" + i);\n        gooddna = false;\n      }\n    }\n    if (gooddna) {\n      this.toText();\n    }\n    return gooddna;\n  };\n\n  emailDarworm () {\n    if(logging()) console.log(\"Emailing: \" + this.toText());\n    var mailtourl = \"mailto:?subject=\" +\n      encodeURIComponent(\"Check out this cool Darworm\") +\n      \"&body=\" +\n      encodeURIComponent(\"Darworms is a free web game available at \\n\") +\n      encodeURIComponent( darworms.host + \"\\n\") +\n      // encodeURIComponent('<a href =\"https://dmaynard.github.io/Darworms/public> Darworms\" </a>') +\n      encodeURIComponent(\"You can copy the darworm string below and then go to the game and paste the text into one of the players\\n\") +\n      encodeURIComponent(this.toText());\n    if(logging()) console.log(\"url: \" + mailtourl);\n\n    // document.location.href = mailtourl;\n    window.open(mailtourl);\n\n  }\n  getNumGenes ( val ) {\n    const reducer = ((accumulator, currentValue) => accumulator + ((currentValue === val ) ? 1 : 0));\n    var codons = this.dna.reduce ( reducer, 0);  //  how many condons are set\n    return codons;\n  }\n  getSmartMove( possibleMoves, center, currentState ) {\n    const towardsCenterBonus = 30;\n    const dnaDistributionBonus = 30;\n    const nonlinearBonus = 30;\n    const dnaNoneBonus = 60;\n    //  score increased depending on the number of spokes in the dest cells\n    const singleSpokes  = [ 1, 2, 4, 8, 16, 32];\n    const oppositeDirs = [3, 4, 5, 0, 1, 2];\n    const destSpokes = [0, 10, 40, 10, 60, 0, 0 ];  // we like cells with 4 spokes!\n    var totalscore = 0;\n    const reducer = ((accumulator, currentValue) => accumulator + (currentValue == 8 ? 0 : 1));\n    var codons = this.dna.reduce ( reducer, 0);  //  how many condons are set\n\n    possibleMoves.forEach( (pickTarget) => {\n      pickTarget.score = 0;\n      //  note excellent candidate for functional programming Here\n      var reducedir =  ((accumulator, currentValue) => accumulator + ((currentValue == pickTarget.dir )? 1  : 0));\n      // how many codons already point in this direction ?\n      var nThisDir =  this.dna.reduce ( reducedir, 0);\n      if ( nThisDir < (codons/6) ) {\n        pickTarget.score += dnaDistributionBonus; // deficit of moves in this directions\n      }\n      if ( nThisDir == 1 ) { // onnly the forced move so far\n        pickTarget.score += dnaNoneBonus; // no moves in this direction yet\n      }\n\n\n      pickTarget.score += destSpokes[numOneBits(pickTarget.spokes)];\n      if (this.pos.x < center.x && ( pickTarget.dir == 0 || pickTarget.dir == 1  || pickTarget.dir == 5)) {\n        pickTarget.score += towardsCenterBonus;\n      }\n      if (this.pos.x > center.x && ( pickTarget.dir == 2 || pickTarget.dir == 3  || pickTarget.dir == 4)) {\n        pickTarget.score += towardsCenterBonus;\n      }\n      if (this.pos.y < center.y && (  pickTarget.dir == 1  || pickTarget.dir == 2)) {\n        pickTarget.score += towardsCenterBonus;\n      }\n      if (this.pos.y > center.y && ( pickTarget.dir == 4 || pickTarget.dir == 5)) {\n        pickTarget.score += towardsCenterBonus;\n      }\n      singleSpokes.forEach ( (val, i)  => {\n        if (val == currentState) {  // a cell with a single spoke in\n          if (pickTarget.dir != oppositeDirs [i]) {  // boost non-straight line directions\n            pickTarget.score += nonlinearBonus;\n          }\n        }\n      });\n    });\n\n    var  totalReducer = ((accumulator, currentPossible) => accumulator + (currentPossible.score));\n    var totalScore = possibleMoves.reduce(totalReducer, 0);\n    //  pick a weighted random directions\n    var selectedDirection = -1;\n    var weighted = Math.floor(Math.random() * totalScore);\n    possibleMoves.forEach( (pickTarget) => {\n      if ((weighted > 0) && (weighted < pickTarget.score)) {\n        selectedDirection = pickTarget.dir;\n      } else {\n        weighted = weighted - pickTarget.score;\n      }\n    })\n    if (selectedDirection > 0 ) {\n      return selectedDirection;\n    };\n    //  emergency escape valve\n    var which = Math.floor(Math.random() * possibleMoves.length);\n    return ( possibleMoves[which].dir);\n  }\n\n  completeDarwormAI() {\n    if(logging()) console.log(\" complete completeDarwormAI called\");\n    this.dna.forEach( (value, index) => {\n      if (value === darworms.dwsettings.codons.unSet) {\n        this.dna[index] = darworms.dwsettings.codons.smart;\n      }\n    }\n  );\n  }\n  completeDarwormRand() {\n    if(logging()) console.log(\" complete completeDarwormRand called\");\n    this.dna.forEach( (value, index) => {\n      var possibleMoves = [];\n      if (value === darworms.dwsettings.codons.unSet) {\n        for (var dir = 0; dir < 6; dir ++) {\n          if( (index & darworms.outMask[dir]) == 0 ) {\n            possibleMoves.push(dir);\n          }\n        }\n        this.dna[index] = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];\n      }\n    }\n  );\n  }\n};\n/* end of Worm */\n","import { Point } from \"./Point.js\";\nimport { darworms } from \"./loader.js\";\n/**\n\n\n/*    drawdna  */\n  //  although we reserve 4 bits for each direction we actually only use 3 bits\n  const spokeMask = [0xFFFFFFF0,\n    0xFFFFFF0F,\n    0xFFFFF0FF,\n    0xFFFF0FFF,\n    0xFFF0FFFF,\n    0xFF0FFFFF,\n    0xF0FFFFFF,\n    0x0FFFFFFF\n  ];\n\n  const xPts = [0.8, 0.4, -0.4, -0.8, -0.4, 0.4];\n  const yPts = [0.0, .67, .67, 0.0, -.67, -.67];\n\n  const sinkMask = 0x08000000;\n  let pGraphics = null;\n\n  export function drawdna ( canvas, darworm, cellstate)  {\n    let width = canvas.clientWidth;\n    let height = canvas.clientHeight;\n    pGraphics = canvas.getContext(\"2d\");\n    // I have NO IDEA why this scale factor is needed\n    // but experiment proves it IS needed to make circles round\n    // and to fill the canvasIsDirty\n    // this may be a JQuery mobile bug?\n    pGraphics.setTransform( 1.5*width/2.0, 0, 0, .75*height/2, 1.5*width/2.0, .75*height/2);\n\n    pGraphics.fillStyle = darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n    pGraphics.strokeStyle = 'black'; // black\n    pGraphics.lineWidth = 0.02;\n    pGraphics.rect(-1,-1,2,2);\n    pGraphics.fill();\n    pGraphics.beginPath();\n    pGraphics.moveTo(xPts[0], yPts[0]);\n    for (var j = 1; j < 6; j = j + 1) {\n      pGraphics.lineTo(xPts[j], yPts[j]);\n    }\n    pGraphics.lineTo(xPts[0], yPts[0]);\n    // pGraphics.closePath();\n    pGraphics.stroke();\n\n    for (var j = 0, mask = 0x1; j < 6; j++, mask <<= 1) {\n      pGraphics.setLineDash (((cellstate & mask) == 0) ? [.02, .02] : []);\n      pGraphics.lineWidth = ((cellstate & mask) == 0) ? 0.01 :  0.04 ;\n      pGraphics.beginPath();\n      pGraphics.moveTo(0,0);\n      pGraphics.lineTo(xPts[j], yPts[j]);\n      pGraphics.stroke();\n    }\n    pGraphics.setLineDash([]);\n  }\n","import {\n  Point\n} from \"./Point.js\";\nimport {\n  darworms\n} from \"./loader.js\";\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n\nexport var wGraphics;\nexport var wCanvas;\nexport var scale; // this really shouldm't be needed eleswhere\nvar gridSize = new Point(0, 0);\nvar grid; // module global passed in at init time\n\nlet xPts = [1.0, 0.5, -0.5, -1.0, -0.5, 0.5];\nlet yPts = [0.0, 1.0, 1.0, 0.0, -1.0, -1.0];\nlet asterixSize = 0.2;\nlet timeInDraw = 0;\nlet gameElapsedTime = 0;\nexport let frameTimes = [];\nexport let startFrameTimes = [];\nlet theGame = null;\nexport function graphicsInit(game) {\n  wCanvas = document.getElementById(\"wcanvas\");\n  wGraphics = wCanvas.getContext(\"2d\");\n  resizeCanvas()\n\n}\nexport function setGrid(currentGrid, game) {\n  grid = currentGrid;\n  timeInDraw = 0;\n  frameTimes.length = 0;\n  startFrameTimes.length = 0;\n  theGame = game;\n\n}\n\nexport function setScale(gridWidth, gridHeight) {\n  scale = new Point((wCanvas.width / (gridWidth + 1.5)), (wCanvas.height / (gridHeight + 1)));\n  gridSize = new Point(gridWidth, gridHeight);\n}\nexport function reScale(gridWidth, gridHeight) {\n  setScale(gridWidth, gridHeight);\n  if(logging()) console.log(\" reScaled to \" + scale.format());\n};\n\nexport function clearCanvas() {\n  // Store the current transformation matrix\n  wGraphics.save();\n  // Use the identity matrix while clearing the canvas\n  wGraphics.setTransform(1, 0, 0, 1, 0, 0);\n  wGraphics.clearRect(0, 0, wCanvas.width, wCanvas.height);\n  wGraphics.fillStyle = darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n  wGraphics.fillStyle = \"#F5F5F500\";\n  wGraphics.fillRect(0, 0, wCanvas.width, wCanvas.height);\n\n  // Restore the transform\n  wGraphics.restore();\n  //    wGraphics.clearRect(0,0,canvas.width,canvas.height);\n};\n\nexport function startGameTimer() {\n  gameElapsedTime = -new Date().getTime();\n}\n\nexport function stopGameTimer() {\n  gameElapsedTime += new Date().getTime();\n}\nexport function getOffset(point) {\n  var xoff;\n  var yoff;\n  if ((point.y & 1) === 0) {\n    xoff = ((point.x + 0.5) * (scale.x)) + (scale.x / 2);\n  } else {\n    xoff = ((point.x + 1.0) * (scale.x)) + (scale.x / 2);\n  }\n  yoff = ((point.y + 0.5) * (scale.y)) + (scale.y / 2);\n  return new Point(xoff, yoff);\n}\n\nexport function gsetTranslate(point) {\n  var cellOffset = getOffset(point);\n  wGraphics.setTransform(scale.x, 0, 0, scale.y, cellOffset.x, cellOffset.y);\n  // if(logging()) console.log( \"Drawing cell \" +  point.format() + \" x= \" + cellOffset.x + \"  y= \" + cellOffset.y);\n};\n\n\nexport function drawCells() {\n  if (grid) {\n    wGraphics.save();\n    for (var col = 0; col < grid.width; col = col + 1) {\n      for (var row = 0; row < grid.height; row = row + 1) {\n        drawcell(new Point(col, row));\n      }\n    }\n    wGraphics.restore();\n  }\n};\nlet sprites = [];\n// sprite sedcription\n// {ts: ,\n// }\n// [ {point}, [sprite descriptions]]\n// anim phases\n//   0 grow out from center to edge mid-point\n//   1 shrink in from center to edge midpoint\n//   2 grow out from edge midpoint to to dest center\n//   3 shrink in from edge midpoint to dest centers\nexport function addSprite ( point, dir, phase, colorIndex, ts, te) {\n  const sprited = { dir: dir, phase: phase, colorIndex: colorIndex, ts: ts, te: te}\n  var added = false;\n  sprites.forEach ( function( item, idx ) {\n    if ( item.point.isEqualTo(point)) {\n      item.spriteds.push(sprited);\n      added = true;\n    }\n  });\n  if ( !added) {\n    sprites.push( {point: point, spriteds: [sprited]});\n  }\n}\nlet previousTime = 0;\nexport function animateSprites (now) {\n  if (previousTime !== 0) {\n    // console.log (now - previousTime , \" ms frame\");\n  }\n  previousTime = now;\n  sprites.forEach( (sprite) => {\n    var cell = sprite.point;\n    drawcell(sprite.point);\n    sprite.spriteds.forEach( (sprited) => {\n      if ( now > sprited.ts && now < sprited.te) {\n        var progress = (now - sprited.ts) / (sprited.te - sprited.ts);\n        drawSprite( cell, progress, sprited.dir, sprited.phase, sprited.colorIndex)\n      }\n    })\n  })\n}\n function drawSprite( cell, progress, dir, phase, colorIndex)   {\n   console.log ( cell.format() + \" progress \" + progress + \" dir \" + dir + \" phase \" + phase + \" colorIndex:  \" + colorIndex);\n  if (phase === 0) {\n    var outSpokeColor = darworms.dwsettings.colorTable[colorIndex];\n    // log (\" outSpokeColor \" + i + \" :  \" + outSpokeColor + \" at \"  + point.format());\n    wGraphics.strokeStyle = outSpokeColor;\n    wGraphics.lineWidth = 8.0 / scale.x;\n    wGraphics.lineCap = 'round';\n    wGraphics.beginPath();\n    wGraphics.moveTo(0, 0);\n    wGraphics.lineTo(xPts[dir]*progress, yPts[dir]*progress);\n    wGraphics.stroke();\n    wGraphics.closePath();\n  }\n}\n\nexport function clearSprites ( ) {\n  while ((sprite = sprites.pop()) !== undefined) {\n    drawcell(sprite.point);\n  }\n}\nexport function drawcell(point) {\n  // if (point.isEqualTo(new Point (this.grid.width-1, this.grid.height/2))) {\n  //     if(logging()) console.log(this.grid.formatStateAt(point));\n  // }\n  timeInDraw -= Date.now();\n  // wGraphics.save();\n  gsetTranslate(point);\n  var owner = grid.spokeAt(point, 7);\n  wGraphics.lineWidth = 2.0 / scale.x;\n  //  first clear cell to prevent multiple cals to drawcell from\n  // darkening the cell  (multiple calls to the same cell are made to\n  // highlite worm positions and animate death.\n  // perhaps we should add a parameter to the call indicating whether clear is needsReDraw\n\n  wGraphics.strokeStyle = darworms.dwsettings.colorTable[owner & 0xF];\n  wGraphics.fillStyle =\n    darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n\n  wGraphics.beginPath();\n  wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n  for (var j = 1; j < 6; j = j + 1) {\n    wGraphics.lineTo(darworms.graphics.vertex_x[j], darworms.graphics.vertex_y[j]);\n  }\n  // wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n  wGraphics.stroke();\n\n  wGraphics.closePath();\n  wGraphics.fill();\n  // wGraphics.stroke();\n  // If cell is captured fill the hex with capturing colors\n  if (owner) {\n    wGraphics.strokeStyle = darworms.dwsettings.colorTable[owner & 0xF];\n    wGraphics.fillStyle =\n      darworms.dwsettings.alphaColorTable[owner & 0xF];\n    wGraphics.beginPath();\n    wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n    for (var j = 1; j < 6; j = j + 1) {\n      wGraphics.lineTo(darworms.graphics.vertex_x[j], darworms.graphics.vertex_y[j]);\n    }\n    // wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n    wGraphics.stroke();\n    wGraphics.closePath();\n    wGraphics.fill();\n  }\n\n  // wGraphics.stroke();\n\n  wGraphics.fillStyle = darworms.dwsettings.alphaColorTable[grid.spokeAt(point, 6) & 0xF];\n\n\n  // wGraphics.fillStyle =  darworms.dwsettings.cellBackground[1-darworms.dwsettings.backGroundTheme];\n  wGraphics.lineWidth = 2.0 / scale.x;\n  wGraphics.beginPath();\n  wGraphics.arc(0, 0, 0.1, 0, Math.PI * 2, true);\n  wGraphics.closePath();\n  wGraphics.fill();\n  //  draw hex outline\n  wGraphics.strokeStyle = darworms.dwsettings.cellBackground[1 - darworms.dwsettings.backGroundTheme];\n  wGraphics.lineWidth = 1.0 / scale.x;\n  wGraphics.beginPath();\n  wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n  for (var j = 1; j < 6; j = j + 1) {\n    wGraphics.lineTo(darworms.graphics.vertex_x[j], darworms.graphics.vertex_y[j]);\n  }\n  wGraphics.lineTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n  wGraphics.stroke();\n  wGraphics.closePath();\n\n  var outvec = grid.outVectorsAt(point);\n  var invec = grid.inVectorsAt(point);\n  // log (\" drawCell at\" +  point.format() + \" outVectors 0x\" + outvec.toString(16) + \" inVectors 0x\" + invec.toString(16));\n\n  for (var i = 0; i < 6; i = i + 1) {\n    if ((outvec & darworms.outMask[i]) !== 0) {\n      var outSpokeColor = darworms.dwsettings.colorTable[grid.spokeAt(point, i)];\n      // log (\" outSpokeColor \" + i + \" :  \" + outSpokeColor + \" at \"  + point.format());\n      wGraphics.strokeStyle = outSpokeColor;\n      wGraphics.lineWidth = 2.0 / scale.x;\n      wGraphics.lineCap = 'round';\n      wGraphics.beginPath();\n      wGraphics.moveTo(0, 0);\n      wGraphics.lineTo(xPts[i], yPts[i]);\n      wGraphics.stroke();\n      wGraphics.closePath();\n    }\n    if ((invec & darworms.outMask[i]) !== 0) {\n      wGraphics.strokeStyle = darworms.dwsettings.colorTable[grid.spokeAt(point, i)];\n      wGraphics.lineWidth = 2.0 / scale.x;\n      wGraphics.lineCap = 'round';\n      wGraphics.beginPath();\n      wGraphics.moveTo(xPts[i], yPts[i]);\n      wGraphics.lineTo(0, 0);\n      wGraphics.stroke();\n      wGraphics.closePath();\n    }\n  }\n  if (grid.isSink(point)) {\n    wGraphics.strokeStyle = darworms.dwsettings.colorTable[0];\n    for (var k = 0; k < 3; k = k + 1) {\n      var m = ((k + 3) % 6);\n      wGraphics.beginPath();\n      wGraphics.moveTo(xPts[k] * asterixSize, yPts[k] * asterixSize);\n      wGraphics.lineTo(xPts[m] * asterixSize, yPts[m] * asterixSize);\n      wGraphics.stroke();\n      wGraphics.closePath();\n      wGraphics.lineTo(darworms.graphics.vertex_x[j], darworms.graphics.vertex_y[j]);\n    }\n  };\n  timeInDraw += Date.now();\n}\n\nexport function highlightWorm(worm, index) {\n  if (worm.state === darworms.gameStates.waiting) {\n    gsetTranslate(worm.pos);\n\n    wGraphics.fillStyle = darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n    wGraphics.beginPath();\n    wGraphics.arc(0, 0, 0.2, 0, Math.PI * 2, true);\n    wGraphics.closePath();\n    wGraphics.fill();\n\n    wGraphics.fillStyle = darworms.dwsettings.alphaColorTable[worm.colorIndex];\n    wGraphics.beginPath();\n    wGraphics.arc(0, 0, 0.2 * ((darworms.graphics.animFrame & 0x1F) / 0x1F), 0, Math.PI * 2, true);\n    wGraphics.closePath();\n    wGraphics.fill();\n\n  }\n}\n\nexport function initPickUI(worm) {\n\n  if(logging()) console.log(\" initPickUI\")\n  darworms.pickCells = new Array();\n  var outvec = this.grid.outVectorsAt(worm.pos);\n  var inVec = this.grid.inVectorsAt(worm.pos);\n  // log (\" drawCell at\" +  point.format() + \" outVectors 0x\" + outvec.toString(16) + \" inVectors 0x\" + invec.toString(16));\n\n  for (var dir = 0; dir < 6; dir = dir + 1) {\n    if (((outvec & darworms.outMask[dir]) == 0) && ((inVec & darworms.outMask[dir]) == 0)) {\n      var pickTarget = {};\n      pickTarget.pos = this.grid.next(worm.pos, dir);\n      pickTarget.dir = dir;\n      pickTarget.color = darworms.dwsettings.alphaColorTable[theGame.focusWorm.colorIndex];\n      pickTarget.wormColorIndex = theGame.focusWorm.colorIndex;\n      darworms.pickCells.push(pickTarget);\n    }\n  }\n}\n\n\nexport function drawPickCells() {\n  var animFraction = 1.0 * (darworms.graphics.animFrame & 0x7F) / 128;\n  if ((darworms.dwsettings.pickDirectionUI == 1) && (animFraction < 0.1)) {\n    clearCanvas();\n    drawCells(); // shound use backbuffer instead of redrawing?\n  };\n\n  darworms.pickCells.forEach(function(pickTarget) {\n    drawPickCell(pickTarget.pos, pickTarget.color);\n  });\n  drawPickCellOrigin(darworms.theGame.focusWorm.pos,\n    darworms.dwsettings.alphaColorTable[darworms.theGame.focusWorm.colorIndex]);\n\n  if (darworms.dwsettings.pickDirectionUI == 1) {\n    darworms.pickCells.forEach(function(pickTarget) {\n      drawExpandedTarget(pickTarget);\n    });\n  }\n\n  darworms.theGame.worms.forEach(function(worm, index) {\n    highlightWorm(worm, index);\n  }, darworms.theGame);\n}\n\n\nexport function drawPickCell(point, activeColor) {\n  // wGraphics.save();\n  gsetTranslate(point);\n  wGraphics.fillStyle = darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n  // wGraphics.fillRect(-0.5, -0.5, 1.0, 1.0);\n  var owner = this.grid.spokeAt(point, 7);\n  if (owner !== 0) {\n    if(logging()) console.log(\" Why is an owned cell a target selection? \" + point.format(point));\n  }\n  drawcell(point); // set up original background for this cell\n\n  var animFraction = 1.0 * (darworms.graphics.animFrame & 0x3F) / 64;\n\n  wGraphics.strokeStyle = activeColor;\n  wGraphics.fillStyle = activeColor;\n  wGraphics.beginPath();\n  wGraphics.moveTo(darworms.graphics.vertex_x[0] * animFraction, darworms.graphics.vertex_y[0] * animFraction);\n  for (var j = 1; j < 6; j = j + 1) {\n    wGraphics.lineTo(darworms.graphics.vertex_x[j] * animFraction, darworms.graphics.vertex_y[j] * animFraction);\n  }\n  wGraphics.moveTo(darworms.graphics.vertex_x[0], darworms.graphics.vertex_y[0]);\n  wGraphics.stroke();\n  wGraphics.closePath();\n  wGraphics.fill();\n  // wGraphics.stroke();\n\n\n\n  wGraphics.fillStyle = darworms.dwsettings.alphaColorTable[this.grid.spokeAt(point, 6) & 0xF];\n};\nexport function drawPickCellOrigin(point, activeColor) {\n  // wGraphics.save();\n  gsetTranslate(point);\n  wGraphics.fillStyle = darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme];\n  // wGraphics.fillRect(-0.5, -0.5, 1.0, 1.0);\n  var owner = this.grid.spokeAt(point, 7);\n  if (owner !== 0) {\n    if(logging()) console.log(\" Why is an owned cell a target selection origin? \" + point.format(point));\n  }\n  drawcell(point); // set up original backgrounf for this cell\n\n  var animFraction = 1.0 * (darworms.graphics.animFrame & 0x3F) / 64;\n\n  wGraphics.strokeStyle = activeColor;\n  wGraphics.fillStyle = activeColor;\n  var outvec = this.grid.outVectorsAt(point);\n  var invec = this.grid.inVectorsAt(point);\n  for (var dir = 0; dir < 6; dir = dir + 1) {\n    if (((outvec & darworms.outMask[dir]) == 0) && ((invec & darworms.outMask[dir]) == 0)) {\n\n\n      wGraphics.lineWidth = 3.0 / scale.x;\n      wGraphics.lineCap = 'round';\n      wGraphics.beginPath();\n      wGraphics.moveTo(0, 0);\n      wGraphics.lineTo(xPts[dir] * animFraction, yPts[dir] * animFraction);\n      wGraphics.stroke();\n      wGraphics.closePath();\n\n    }\n\n  }\n\n};\nexport function drawExpandedTarget(pickTarget) {\n  // Draw the up to six large pick targets on screen perimeter\n  var screenCoordinates = getOffset(pickTarget.pos);\n\n  wGraphics.save();\n\n\n  const fillColorString = darworms.dwsettings.alphaColorTable[pickTarget.wormColorIndex];\n\n  wGraphics.strokeStyle = fillColorString;\n\n  wGraphics.lineWidth = 4;\n  wGraphics.setTransform(1.0, 0, 0, 1.0, 0, 0);\n  wGraphics.beginPath();\n  var xloc = ((xPts[pickTarget.dir] * wCanvas.width * .75) / 2) + (wCanvas.width / 2);\n  var yloc = ((yPts[pickTarget.dir] * wCanvas.height * .75) / 2) + (wCanvas.height / 2);\n\n  wGraphics.arc(xloc, yloc, 20, 0, Math.PI * 2, false);\n  wGraphics.closePath();\n  wGraphics.stroke();\n\n  wGraphics.strokeStyle = fillColorString;\n  wGraphics.lineWidth = 2;\n  wGraphics.moveTo(xloc, yloc);\n  wGraphics.beginPath();\n  wGraphics.moveTo(xloc, yloc);\n  var animFraction = 1.0 * (darworms.graphics.animFrame & 0x7F) / 128;\n  wGraphics.lineTo(\n    (xloc + ((screenCoordinates.x - xloc) * animFraction)),\n    (yloc + ((screenCoordinates.y - yloc) * animFraction)));\n\n  wGraphics.closePath();\n  wGraphics.stroke();\n  wGraphics.restore();\n}\n\nexport function selectDirection(point) {\n  ((darworms.dwsettings.pickDirectionUI == 1)) ? selectLargeUIDirection(point):\n    selectSmallUIDirection(point);\n}\n\nfunction selectSmallUIDirection(touchPoint) {\n  // we should be able to bind the forEach to this instead using darworms.theGame\n  darworms.pickCells.forEach(function(pickTarget) {\n    var screenCoordinates = getOffset(pickTarget.pos);\n    var absdiff = touchPoint.absDiff(screenCoordinates);\n    var diff = new Point(touchPoint.x - screenCoordinates.x, touchPoint.y - screenCoordinates.y);\n    if ((absdiff.x < (scale.x / 2)) && (absdiff.y < (scale.y / 2)) &&\n      this.gameState === darworms.gameStates.waiting) {\n      if(logging()) console.log(\" target hit delta: \" + diff.format());\n      setDNAandResumeGame(pickTarget.dir);\n    }\n  }, darworms.theGame);\n\n}\n\nfunction setDNAandResumeGame(direction) {\n  theGame.focusWorm.dna[theGame.focusValue & 0x3F] = direction;\n  theGame.focusWorm.numChoices += 1;\n  darworms.theGame.gameState = darworms.gameStates.running;\n  clearCanvas();\n  drawCells();\n}\n\nfunction selectLargeUIDirection(point) {\n  // if(logging()) console.log( \"selectDirection: \" + point.format());\n  var outvec = darworms.theGame.grid.stateAt(theGame.focusWorm.pos);\n  var minDist = 100000;\n  var dist;\n  var select = -1;\n  for (var i = 0; i < 6; i = i + 1) {\n    if ((outvec & darworms.outMask[i]) === 0) {\n      const target = new Point(\n        (((darworms.theGame.xPts[i] * wCanvas.width * .75) / 2) + (wCanvas.width / 2)),\n        (((darworms.theGame.yPts[i] * wCanvas.height * .75) / 2) + (wCanvas.height / 2)));\n\n      // if(logging()) console.log(\" direction: \" + i + \" target point \" + target.format());\n      // if(logging()) console.log(\"Touch Point: \" + point.format());\n      dist = target.dist(point);\n      //  Actual pixel coordinates\n      if (dist < minDist) {\n        minDist = dist;\n        select = i;\n      }\n      // if(logging()) console.log(\"selectDirection i: \" + i + \"  dist: \" + dist + \" Min Dist:\" + minDist);\n    }\n  }\n  if ((minDist < wCanvas.width / 8) && (select >= 0)) {\n    setDNAandResumeGame(select);\n  }\n};\n\nexport function animateDyingWorms() {\n  for (var i = 0; i < 4; i = i + 1) {\n    // We don't want to do the animates in the same order ever frame because\n    // when tow worms die together the second's animations would always overwite\n    // the first's/\n\n    var whichWorm = ((i + darworms.graphics.uiFrames) & 0x3);\n    if (theGame.worms[whichWorm].state == darworms.wormStates.dying) {\n      animateDyingCell(theGame.worms[whichWorm]);\n    }\n  }\n}\n\nfunction animateDyingCell(worm) {\n  drawcell(worm.pos);\n  drawShrikingOutline(worm);\n}\n\nfunction drawShrikingOutline(worm) {\n  var animFraction = (darworms.graphics.dyningAnimationFrames - (darworms.graphics.uiFrames - worm.diedAtFrame)) /\n    darworms.graphics.dyningAnimationFrames;\n  gsetTranslate(worm.pos);\n\n  wGraphics.strokeStyle = darworms.dwsettings.alphaColorTable[worm.colorIndex];\n  wGraphics.lineWidth = .1;\n  wGraphics.fillStyle = darworms.dwsettings.alphaColorTable[worm.colorIndex];\n  wGraphics.beginPath();\n  wGraphics.moveTo(darworms.graphics.vertex_x[0] * animFraction, darworms.graphics.vertex_y[0] * animFraction);\n  for (var j = 1; j < 6; j = j + 1) {\n    wGraphics.lineTo(darworms.graphics.vertex_x[j] * animFraction, darworms.graphics.vertex_y[j] * animFraction);\n  }\n  wGraphics.lineTo(darworms.graphics.vertex_x[0] * animFraction, darworms.graphics.vertex_y[0] * animFraction);\n  //wGraphics.stroke();\n  wGraphics.closePath();\n  wGraphics.stroke();\n  //wGraphics.fill();\n  // wGraphics.stroke();\n}\n\nexport function showTimes() {\n  var min = 100000000;\n  var max = 0;\n  var ave = 0;\n  var nFrames = 0;\n  var sumTime = 0;\n  var fps = 0;\n  if(logging()) console.log(\"frameTimes.length \" + frameTimes.length);\n  for (var i = 0; i < frameTimes.length; i = i + 1) {\n    nFrames = nFrames + 1;\n    if (frameTimes[i] > max) {\n      max = frameTimes[i];\n    }\n    if (frameTimes[i] < min) {\n      min = frameTimes[i];\n    }\n    sumTime = sumTime + frameTimes[i];\n  }\n  if (nFrames > 0) {\n    ave = Math.round(sumTime / nFrames * 100) / 100;\n  }\n  var totalElapsed = new Date().getTime() - startFrameTimes[0];\n  var percentDrawing = Math.round((sumTime * 100 / totalElapsed * 100)) / 100;\n  // var percentDrawing = (sumTime * 100 / totalElapsed);\n\n  if (gameElapsedTime > 0) {\n    fps = Math.round(nFrames * 1000 / gameElapsedTime * 100) / 100;\n  }\n  document.getElementById('wormframes').innerHTML = nFrames;\n  document.getElementById('wormmintime').innerHTML = min;\n  document.getElementById('wormmaxtime').innerHTML = max;\n  document.getElementById('wormavetime').innerHTML = ave;\n  document.getElementById('wormframetargettime').innerHTML = 1000 / $(\"#fps\").val();\n\n  document.getElementById('wormfps').innerHTML = fps;\n  //  frame Intervals.  How often did out update get called\n  min = 1000000;\n  max = 0;\n  nFrames = 0;\n  sumTime = 0;\n  ave = 0;\n  var delta = 0;\n  for (i = 1; i < startFrameTimes.length; i = i + 1) {\n    nFrames = nFrames + 1;\n    delta = startFrameTimes[i] - startFrameTimes[i - 1];\n    if (delta > max) {\n      max = delta;\n    }\n    if (delta < min) {\n      min = delta;\n    }\n    sumTime = sumTime + delta;\n  }\n  if (nFrames > 0) {\n    ave = Math.round(sumTime / nFrames * 100) / 100;\n  }\n  document.getElementById('wormframemintime').innerHTML = min;\n  document.getElementById('wormframemaxtime').innerHTML = max;\n  document.getElementById('wormframeavetime').innerHTML = ave;\n  document.getElementById('wormframepercenttime').innerHTML = percentDrawing;\n  document.getElementById('wormframetotaltime').innerHTML = timeInDraw / 1000;\n\n\n};\n\n//  set the wcanvas dimensions based on the window dimentions\nexport function resizeCanvas() {\n  var xc = $('#wcanvas');\n  var canvasElement = document.getElementById('wcanvas');\n  var sc = $('#scorecanvas');\n  var nc = $('#navcontainer');\n  var fb = $('#footerbar');\n  var w = $(window).width();\n  var h = $(window).height();\n  var widescreen = w / (h - 140);\n  if (widescreen > 2.0) {\n    w = 2.0 * (h - 140);\n  }\n\n  if (h > 400) {\n    xc.css({\n      width: w - 20 + 'px',\n      height: h - 140 + 'px'\n    });\n    sc.css({\n      width: w - 20 + 'px',\n      height: 30 + 'px'\n\n    });\n  } else {\n    var nw = Math.floor(w * .70);\n    xc.css({\n      width: nw + 'px',\n      height: h - 110 + 'px'\n    });\n    sc.css({\n      width: nw + 'px'\n\n    });\n\n  }\n  canvasElement.height = h - 140;\n  canvasElement.width = w;\n  if ($('#debug').slider().val() === \"1\") {\n    alert(\" Resize \" + w + \" x \" + h + \" debug \" + $('#debug').slider().val());\n  }\n\n  if (darworms.theGame) {\n    setScale(this.grid.width, this.grid.height);\n    darworms.theGame.needsRedraw = true;\n    clearCanvas();\n    drawCells();\n  }\n}\n","// scorecanvas.js\nimport {\n  Point\n} from \"./Point.js\";\nimport {\n  darworms\n} from \"./loader.js\";\n\nvar scoreCanvas;\nexport var scorectx;\n\nexport function scoreCanvasInit(game) {\n  scoreCanvas = document.getElementById(\"scorecanvas\");\n  scorectx = scoreCanvas.getContext(\"2d\");\n  scorectx.font = \"bold 18px sans-serif\";\n  scorectx.shadowColor = \"rgb(190, 190, 190)\";\n  scorectx.shadowOffsetX = 3;\n  scorectx.shadowOffsetY = 3;\n}\n\nexport function clearScore(segmentIndex, totalSegments) {\n  var segWidth = scoreCanvas.width / totalSegments;\n  scorectx.fillStyle = darworms.dwsettings.cellBackground[0];\n  scorectx.shadowOffsetX = 0;\n  scorectx.shadowOffsetY = 0;\n\n  scorectx.fillRect(segWidth * segmentIndex, 0, segWidth, scoreCanvas.height);\n}\n\n\n\nfunction scoreStartx(segmentIndex, totalSegments, text) {\n  var segWidth = scoreCanvas.width / totalSegments;\n  var twidth = scorectx.measureText(text).width;\n  return ((segWidth * segmentIndex) + (segWidth / 2) - (twidth / 2));\n\n}\n\nexport function updateScores(wormArray) {\n  var i;\n\n  wormArray.forEach(function(aworm, i) {\n    if (aworm !== undefined && aworm.shouldDrawScore()) {\n      clearScore(i, 4);\n      scorectx.fillStyle = darworms.dwsettings.colorTable[i + 1];\n      // scorectx.shadowOffsetX = 3;\n      // scorectx.shadowOffsetY = 3;\n      scorectx.fillText(aworm.score, scoreStartx(i, 4, aworm.score.toString()), 15);\n    }\n  })\n  // for (i = 0; i < 4; i++) {\n  //   if (aworm !== undefined && shouldDrawScore.shouldDrawScore()) {\n  //      clearScore(i, 4);\n  //      scorectx.fillStyle = darworms.dwsettings.colorTable[i + 1];\n  // scorectx.shadowOffsetX = 3;\n  // scorectx.shadowOffsetY = 3;\n  //      scorectx.fillText(aworm.score, scoreStartx(i, 4, aworm.score.toString()), 15);\n  //    }\n};\n","// gameio.js\nimport {\n  updateScores\n} from \"./scorecanvas.js\";\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n\n\n\nlet jsongame = {\n\n}\n\nlet dworm = {\n  name: \"\",\n  index: 0,\n}\n\nlet gameObj = {};\nlet gameTxt = \"\";\nlet gameUrl = \"\";\n\n\nfunction pick(o, ...fields) {\n  return fields.reduce((a, x) => {\n    if (o.hasOwnProperty(x)) a[x] = o[x];\n    return a;\n  }, {});\n}\n\nfunction addPick(a, o, ...fields) {\n  return Object.assign(a, pick(o, ...fields))\n}\n\nfunction gameName(game) {\n  const then = new Date(game.createdAt);\n  var name = then.toString();\n  let nplayers = 0;\n  game.players.forEach(function(aworm, i) {\n    if (aworm.typeName !== \" None \") nplayers++;\n  });\n  name = name.substr(0, name.indexOf('GMT'));\n  name += '[' + game.width + 'x' + game.width + ': ' + nplayers;\n  name += (nplayers == 1) ? ' player]' : ' players]';\n  return name;\n}\nexport function emailGame(gameText) {\n  var mailtourl = \"mailto:?subject=\" +\n    encodeURIComponent(\"Darworms Game \") +\n    \"&body=\" +\n    encodeURIComponent(\"Darworms is a unique, free web strategy territoty capture game. Select everything below and paste it into a browser address bar \\n\\n\") +\n    // encodeURIComponent(\"Here is an example of a game I played: \\n\") +\n\n    encodeURIComponent(darworms.host) +\n    encodeURIComponent(\"?darwormsgame=\") +\n    encodeURIComponent(gameText);\n  if(logging()) console.log(\"url: \" + mailtourl);\n  // document.location.href = mailtourl;\n  window.open(mailtourl);\n\n}\nexport function encodeGame(game, settings, graphics, version) {\n  if(logging()) console.log(\" encodeGame 0 \");\n  now = new Date();\n  gameObj = {\n    version: version\n  };\n  gameObj.createdAt = now.valueOf();\n  gameObj = addPick(gameObj, game, \"numMoves\", \"numTurns\");\n  gameObj = addPick(gameObj, game.grid, \"width\");\n  gameObj = addPick(gameObj, settings, \"backGroundTheme\", \"doAnimations\",\n    \"doAudio\", \"gridGeometry\", \"fixedInitPos\", \"pickDirectionUI\", \"masterAudioVolume\");\n  gameObj = addPick(gameObj, graphics, \"fps\");\n\n  gameObj.players = [];\n  game.worms.forEach(function(aworm, i) {\n    var wrm = {\n      index: i\n    };\n    // new dna may have been set in this game\n    aworm.toText();\n    wrm = addPick(wrm, aworm, \"typeName\", \"startingPos\", \"name\", \"score\", \"instrument\", \"musickeyName\", \"MusicScale\");\n    gameObj.players.push(wrm);\n  });\n\n  gameTxt = JSON.stringify(gameObj);\n  gameUrl = encodeURIComponent(gameTxt)\n  let testOne = decodeURIComponent(gameUrl);\n  let testTwo = JSON.parse(testOne);\n  let testThree = JSON.stringify(testTwo);\n  // if(logging()) console.log(\"before: \" + gameTxt);\n  // if(logging()) console.log(\"after:  \" + testThree);\n  return (gameTxt)\n\n}\n\nexport function decodeGame(gameTxt) {\n  if(logging()) console.log(\" decodeGame \");\n  let gameObj = JSON.parse(gameTxt);\n  darworms.dwsettings.gridGeometry = gameObj.gridGeometry;\n  darworms.main.setupGridGeometry();\n}\n\nexport function loadGames() {\n\n  const data = JSON.parse(localStorage.getItem('darwormgames'))\n  darworms.savedgames = data || [];\n  let gameindex = 0;\n\n  darworms.savedgames.forEach(function(gameTxt, i) {\n    const gameObj = JSON.parse(gameTxt);\n    const then = new Date(gameObj.createdAt);\n    /* const elementStr = '<li> <button data-role=\"button\" data-inline=\"false\"  data-theme=\"a\" lass=\"ui-btn ui-shadow ui-corner-all\"> ' +\n    then.toTimeString() +\n     '</button></li>';\n    $('#savedgames')[0].appendChild(elementStr).trigger('create');\n*/\n    const liStr = '<li data-icon=\"delete\" data-split-icon=\"delete-black\"><a class=\"loadMe\" value=' + i + '>' + gameName(gameObj) + '</a><a value=' +\n      i + ' data-icon=\"star\" data-split-icon=\"delete-black\" class=\"deleteMe\" ></a></li>'\n    $('#savedgames').append(liStr).listview('refresh');\n\n    //    $('#savedgames').append(liStr).trigger('create');\n    //    $('#savedgames').append('<li id=\"l1\"><a>5.00</a><a id=\"1\" class=\"deleteMe\"></a></li>').trigger('create');\n    if(logging()) console.log(\" liStr: \" + liStr);\n\n\n  })\n  $('.deleteMe').on('click', function(event) {\n    if(logging()) console.log(\" deleteMe clicked\");\n    if(logging()) console.log($(this).attr(\"value\"));\n    let index = parseInt($(this).attr(\"value\"))\n    if ((index >= 0) && (index < darworms.savedgames.length)) {\n      darworms.savedgames.splice(index, 1);\n    }\n    localStorage.setItem('darwormgames', JSON.stringify(darworms.savedgames));\n    refreshSavedGames();\n  });\n  $('.loadMe').on('click', function(event) {\n    if(logging()) console.log(\" loadMe clicked\");\n    if(logging()) console.log($(this).attr(\"value\"));\n    let index = parseInt($(this).attr(\"value\"))\n    if ((index >= 0) && (index < darworms.savedgames.length)) {\n      let gameObj = darworms.main.injectSettings(darworms.savedgames[index]);\n      updateScores(darworms.main.gWorms);\n      $.mobile.changePage('#playpage');\n    }\n\n  });\n}\n\nexport function freeGames() {\n  const svgamelist = $('#savedgames')[0];\n  while (svgamelist.firstChild) {\n    svgamelist.removeChild(svgamelist.firstChild)\n  }\n}\n\nexport function saveGame(gameTxt) {\n  if(logging()) console.log(\" saveGame \");\n  darworms.savedgames.push(gameTxt);\n  localStorage.setItem('darwormgames', JSON.stringify(darworms.savedgames));\n  refreshSavedGames();\n\n}\n\nexport function loadGame() {\n  if(logging()) console.log(\" loadGame \");\n  const data = JSON.parse(localStorage.getItem('darwormgames'));\n}\n\nfunction refreshSavedGames() {\n  const svgamelist = $('#savedgames')[0];\n  while (svgamelist.firstChild) {\n    svgamelist.removeChild(svgamelist.firstChild)\n  }\n  loadGames();\n}\n","//  Game.js\nimport {\n  Point\n} from \"./Point.js\";\nimport {\n  darworms\n} from \"./loader.js\";\nimport {\n  Grid\n} from \"./Grid.js\";\nimport {\n  drawdna\n} from \"./drawdna.js\";\nimport {\n  getOffset,\n  gsetTranslate,\n  setGrid\n} from \"./graphics.js\"\nimport {\n  wCanvas,\n  setScale,\n  scale,\n  drawcell,\n  showTimes,\n  frameTimes,\n  startFrameTimes,\n  startGameTimer,\n  stopGameTimer,\n  highlightWorm,\n  drawPickCell,\n  drawPickCellOrigin,\n  drawExpandedTarget,\n  drawPickCells,\n  drawCells,\n  graphicsInit,\n  animateDyingWorms,\n  clearCanvas,\n  initPickUI,\n  selectDirection,\n  addSprite,\n  clearSprites\n} from \"./graphics.js\";\n\nimport {\n  scoreCanvasInit,\n  clearScore,\n  updateScores\n} from \"./scorecanvas.js\";\n\nimport {\n  encodeGame,\n  decodeGame,\n} from \"./gameio.js\"\n\nimport {\n  Worm\n} from \"./Worm.js\";\ng\n\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n\n/**\n * Created with JetBrains WebStorm.\n * User: dmaynard\n * Date: 9/22/13\n * Time: 12:15 AM\n * To change this template use File | Settings | File Templates.\n */\n\n// This module needs to separated into separate  UI(graphics) and game logic modules\n\nvar nextToMove;\nvar focusPoint;\nvar focusWorm\n\n// the jump from full pan left (-1.0) to full pan right (+1.0)\n// is too jaring. This limits pan to [-.8 , +.8]\n// Could be a setting  (pan effect 0 - 1)\nconst maxpan = 0.8;\n\nexport class Game {\n  constructor(gridWidth, gridHeight) {\n\n    wCanvas.width = $('#wcanvas').width();\n    wCanvas.height = $('#wcanvas').height()\n\n\n    this.gameState = darworms.gameStates.over;\n    this.grid = new Grid(gridWidth, gridHeight);\n    setGrid(this.grid, this);\n\n    this.numTurns = 0;\n    this.numMoves = 0;\n    this.activeIndex = 0;\n\n    setScale(gridWidth, gridHeight);\n    if(logging()) console.log(\" new Game scale set to \" + scale.format());\n    this.origin = new Point(gridWidth >> 1, gridHeight >> 1);\n    focusPoint = this.origin;\n    this.worms = [];\n    this.needsRedraw = true;\n    this.avePos = new Point(0, 0);\n    // worm index of zero means unclaimed.\n    this.focusWorm = null;\n    this.focusValure = null;\n\n    this.xPts = [1.0, 0.5, -0.5, -1.0, -0.5, 0.5];\n    this.yPts = [0.0, 1.0, 1.0, 0.0, -1.0, -1.0];\n\n    // variable for animating zoom in to selection UI\n    // create back buffer image  for current grid image\n\n    // this should depend on scale factor.  On small screens\n    // we cshould set pickDirectionUI to true\n    if ((scale.x) < 20 || (scale.y < 20)) {\n      $('#pickDirectionUI').slider().val(1);\n      $('#pickDirectionUI').slider(\"refresh\");\n      darworms.dwsettings.pickDirectionUI = 1;\n    }\n    if(logging()) console.log(\" Scale: \" + scale.format() + \"darworms.dwsettings.pickDirectionUI: \" + darworms.dwsettings.pickDirectionUI);\n    this.zoomFrame = 0;\n    this.startx = 0;\n    this.starty = 0;\n    this.endx = 0;\n    this.endy = 0;\n    this.startscale = 1.0;\n    this.endScale = 1.0;\n    // three second zoom animation\n    this.targetZoomFrames = 60;\n    this.asterixSize = 0.2;\n    this.bullseyeoffset = new Point(0, 0);\n    this.focusWorm = null;\n\n  }\n\n  updateScale(width, height) {\n    setScale(this.grid.width, this.grid.height);\n\n    if(logging()) console.log(\"updateScale \" + scale.format());\n  };\n\n  logGame() {\n\n    if(logging()) console.log(\" Game grid size  \" + new Point(this.grid.width, this.grid.height).format());\n    if(logging()) console.log(\" Game Canvas size  \" + new Point(wCanvas.width, wCanvas.height).format());\n    if(logging()) console.log(\" Game scale \" + scale.format());\n    for (var i = 0; i < this.worms.length; i = i + 1) {\n      if(logging()) console.log(\" Game worm \" + i + \" :  \" + this.worms[i].state + \" at \" + this.worms[i].pos.format() + \" value:\" + this.grid.hexValueAt(this.worms[i].pos));\n      // this.worms[i].if(logging()) console.log();\n      // log ( \"   Grid value =  \");\n      // this.grid.logValueAt(this.worms[i].pos);\n    }\n  };\n  printNonEmpty() {\n\n    this.grid.each(function(point, value) {\n      if (value > 0) {\n        if(logging()) console.log(\"NonEmpty \" + point.format() + \" value: 0x\" + value.toString(16));\n      }\n    });\n\n  };\n\n  /*  TODO  move all drawing from game to graphics.js\n\n   */\n\n\n  initGame() {\n    clearCanvas();\n    this.grid.clear();\n    setGrid(this.grid, this)\n    drawCells();\n    startGameTimer();\n    this.numMoves = 0;\n    this.numTurns = 0;\n    this.timeInDraw = 0;\n\n  };\n  addWorm(w) {\n    w.pos = this.origin;\n    w.nMoves = 0;\n    w.score = 0;\n    w.state = darworms.wormStates.paused;\n    this.worms.push(w);\n  };\n  getAvePos(w) {\n    var nActiveAve = 0;\n    this.avePos.x = 0;\n    this.avePos.y = 0;\n\n    for (var i = 0; i < this.worms.length; i = i + 1) {\n      var active = this.worms[i];\n      if (active.state === darworms.wormStates.moving) {\n        this.avePos.x = this.avePos.x + active.pos.x;\n        this.avePos.y = this.avePos.y + active.pos.y;\n        nActiveAve = nActiveAve + 1;\n      }\n    }\n\n    if (nActiveAve > 1) {\n      this.avePos.x = Math.floor(this.avePos.x / nActiveAve);\n      this.avePos.y = Math.floor(this.avePos.y / nActiveAve);\n    }\n    // if(logging()) console.log(this.avePos.format());\n  };\n\n  makeMove(graphicsOn) {\n    var nAlive = 0;\n    if (this.gameState === darworms.gameStates.waiting) {\n      return;\n    }\n    // log (\"Game  StartingTurn \" + this.numTurns );\n    for (var i = nextToMove; i < this.worms.length; i = i + 1) {\n      var active = this.worms[i];\n      darworms.theGame.activeIndex = i;\n      // log (\" GamemakeMove   for worm\" + i + \" :  \" + darwormd.wormStateNames[active.state] + \" at \"  + active.pos.format());\n      if (active.state === darworms.wormStates.sleeping) {\n        continue;\n      }\n      // active.state = darworms.wormStates.moving;\n      // log (\" Game  Before Move for worm\" + i + \" :  \" + active.state + \" at \"  + active.pos.format());\n      // active.if(logging()) console.log();\n      // log ( \"   Grid value =  \");\n      // this.grid.logValueAt(active.pos);\n      var currentState = this.grid.stateAt(active.pos);\n      // log (\" Current State = \" + currentState);\n      if (currentState == 0x3F) {\n        // last sample is death sound\n        if ((active.state != (darworms.wormStates.dead) && (active.state != darworms.wormStates.dying))) {\n          if (darworms.dwsettings.doAnimations) {\n            if ((darworms.dwsettings.doAudio == 1) && darworms.audioSamples[darworms.audioSamples.length - 1]) {\n              darworms.audioSamples[darworms.audioSamples.length - 1].playSample(1.0, 0.0);\n            }\n          }\n          active.state = (darworms.dwsettings.doAnimations) ? darworms.wormStates.dying : darworms.wormStates.dead;\n          active.diedAtFrame = darworms.graphics.uiFrames;\n          if(logging()) console.log(\" darworm \" + active.colorIndex + \" dying at frame: \" + darworms.graphics.animFrame);\n        }\n\n        if (active.state == darworms.wormStates.dying) {\n          if ((darworms.graphics.uiFrames - active.diedAtFrame) > darworms.graphics.dyningAnimationFrames) {\n            active.state = darworms.wormStates.dead;\n            if(logging()) console.log(\" darworm \" + active.colorIndex + \" dead at frame: \" + darworms.graphics.animFrame);\n          }\n        }\n\n      } else {\n        var direction = active.getMoveDir(currentState);\n        if (direction === darworms.dwsettings.codons.smart) {\n          var outvec = this.grid.outVectorsAt(active.pos);\n          var inVec = this.grid.inVectorsAt(active.pos);\n          var possibleDirections = [];\n          var center = new Point(this.grid.width/2, this.grid.width/2)\n          for (var dir = 0; dir < 6; dir = dir + 1) {\n            if (((outvec & darworms.outMask[dir]) == 0) && ((inVec & darworms.outMask[dir]) == 0)) {\n              var pickTarget = {};\n              pickTarget.pos = this.grid.next(active.pos, dir);\n              pickTarget.dir = dir;\n              pickTarget.spokes = (this.grid.valueAt(pickTarget.pos) & 0x3F);\n              possibleDirections.push(pickTarget);\n            }\n          }\n          direction = active.getSmartMove(possibleDirections, center, currentState);\n          active.dna[currentState] = direction & 0x3F;\n        }\n        if (direction === darworms.dwsettings.codons.unSet) {\n          this.gameState = darworms.gameStates.waiting;\n          // if(logging()) console.log(\" setting gamestate to  \" + this.gameState);\n          focusPoint = active.pos;\n          focusWorm = active;\n          darworms.theGame.focusWorm = active;\n          darworms.theGame.focusValue = currentState;\n          if (darworms.theGame.focusWorm.showTutorial) {\n            $(\"input[type='checkbox']\").attr(\"checked\", false);\n            var btns = ['#p1button', '#p2button', '#p3buton', '#p4button'];\n            // ToDo  set proper theme for popup   red green blue ye\n            // Setter\n            // $('#tutorialpopup' ).popup( \"option\", \"overlayTheme\", \"d\" );\n            $('#tutorialpopup').popup(\"option\", \"theme\", darworms.themes[darworms.theGame.activeIndex]);\n            // this makes the popup background transparent, but it looks reall bad\n            // $('#tutorialpopup').popup( \"option\",\"theme\", 'none' );\n            if(logging()) console.log(\" init popup here\");\n            drawdna(document.getElementById('popupcanvas'), active, currentState);\n            $('#tutorialpopup').popup(\"open\", {\n              positionTo: btns[darworms.theGame.activeIndex]\n            });\n          }\n          nextToMove = i;\n          this.numMoves = this.numMoves + 1;\n          active.nMoves = active.nMoves + 1;\n          clearSprites();\n          initPickUI(active);\n          return (true);\n        }\n        if (true || graphicsOn) {\n          addSprite ( active.pos, direction, 0, active.colorIndex, darworms.graphics.now , darworms.graphics.now + (darworms.graphics.frameInterval/4))\n          addSprite ( active.pos, direction, 1, active.colorIndex, darworms.graphics.now + (darworms.graphics.frameInterval/4), darworms.graphics.now + (darworms.graphics.frameInterval/2))\n      }\n        // log (\" Move Direction = \" + direction);\n        var next = this.grid.next(active.pos, direction);\n        if (next.isEqualTo(darworms.dwsettings.noWhere)) { // fell of edge of world\n          active.state = darworms.wormStates.dead;\n          active.died = true;\n        } else {\n          var didScore = this.grid.move(active.pos, next, direction, active.colorIndex);\n          active.score = active.score + didScore;\n          this.numMoves = this.numMoves + 1;\n          active.nMoves = active.nMoves + 1;\n          // if(logging()) console.log(\"    Worm \" + active.colorIndex + \"  just made move \" + active.nMoves + \" game turn \" + this.numTurns + \" From \" + this.grid.formatStateAt(active.pos) + \" direction  \" + direction);\n          active.pos = next;\n\n          if (true || graphicsOn) {\n            addSprite ( next, darworms.inDir[direction], 2, active.colorIndex, darworms.graphics.now + (darworms.graphics.frameInterval/2) , darworms.graphics.now + (darworms.graphics.frameInterval*3/4));\n            addSprite ( next, darworms.inDir[direction], 3, active.colorIndex, darworms.graphics.now + (darworms.graphics.frameInterval*3/4), darworms.graphics.now + (darworms.graphics.frameInterval))\n\n            // last sound slot is labeld muted but actually contains the end game clip\n            if (darworms.dwsettings.doAudio == 1 && graphicsOn  &&\n                (active.instrument < (darworms.audiosamplefiles.length-1))) {\n              let panValue = maxpan * ((active.pos.x - (darworms.theGame.grid.width / 2)) / (darworms.theGame.grid.width / 2));\n              if ((active.audioSamplesPtrs[direction] !== undefined) && (active.audioSamplesPtrs[direction] >= 0)) {\n                darworms.audioSamples[active.audioSamplesPtrs[direction]].\n                playSample(\n                  darworms.audioPlaybackRates[active.MusicScale[(didScore == 1) ? 6 : direction]],\n                  panValue);\n              }\n            }\n\n          }\n\n          // if(logging()) console.log(\" active.score [\" +  i + \"] =\"  + active.score);\n\n          //if(logging()) console.log(\"     From Value is \" +  this.grid.hexValueAt(active.pos)  );\n          //log (\" Next Point = \" + next.format());\n          //if(logging()) console.log(\" Set To State to \" +  this.grid.stateAt(active.pos)  );\n          //if(logging()) console.log(\"     To Value is \" +  this.grid.hexValueAt(active.pos)  );\n        }\n\n      }\n      if ((active.state !== darworms.wormStates.dead)) {\n        nAlive = nAlive + 1;\n      }\n      //log (\" Game  After Move for worm\" + i + \" :  \" + active.state + \" at \"  + active.pos.format());\n      // this.grid.logValueAt(active.pos);\n    }\n    nextToMove = 0;\n    this.numTurns = this.numTurns + 1;\n    return (nAlive > 0 || (nextToMove !== 0));\n  };\n\n\n\n\n  // Converts canvas to an image\n  convertCanvasToImage(canvas) {\n    var image = new Image();\n    image.src = canvas.toDataURL(\"image/png\");\n    return image;\n  }\n}\n\nexport function binToRGB(bin) {\n  return {\n    r: parseInt(((bin >> 16) & 0xFF)),\n    g: parseInt(((bin >> 8) & 0xFF)),\n    b: parseInt(((bin) & 0xFF))\n  };\n}\n\n// end of Module prototypes\n\n//  Called from Timer Loop\n\nfunction makeMoves() {\n  // if(logging()) console.log(\" makeMoves theGameOver \" + theGameOver +  \"  gameState \" + gameStateNames[theGame.gameState] );\n  var startTime = new Date().getTime();\n  startFrameTimes.push(startTime);\n  if (darworms.theGame.needsRedraw) {\n    drawCells();\n    darworms.theGame.needsRedraw = false;\n  }\n  if (darworms.theGame.gameState != darworms.gameStates.over) {\n    if (darworms.theGame.makeMove(darworms.dwsettings.doAnimations) === false) {\n      stopGameTimer();\n      if(logging()) console.log(\" Game Over\");\n      clearInterval(darworms.graphics.timer);\n      // document.getElementById(\"startpause\").innerHTML = \"Start Game\";\n      $(\"#startpause\").text(\"Start Game\");\n      showTimes();\n      updateScores(darworms.theGame.worms);\n      darworms.theGame.gameState = darworms.gameStates.over;\n      darworms.gameTxt = encodeGame( darworms.theGame, darworms.dwsettings, darworms.graphics, darworms.version);\n      // decodeGame(gameTxt);\n      // darworms.main.injectSettings(gameTxt);\n    }\n  }\n  if (darworms.dwsettings.doAnimations) {\n    // clearSprites();\n    animateDyingWorms();\n    darworms.theGame.getAvePos();\n  }\n  updateScores(darworms.theGame.worms);\n  var elapsed = new Date().getTime() - startTime;\n  frameTimes.push(elapsed);\n};\n// Called from user actions\n\n\nfunction gameInit() {\n  // used to initialize variables in this module's closure\n  if(logging()) console.log(\" wCanvas,width: \" + wCanvas.width);\n  graphicsInit(this);\n  scoreCanvasInit();\n  nextToMove = 0;\n\n}\n\nexport {\n  gameInit,\n  reScale,\n  makeMoves,\n  selectDirection,\n  updateScores\n}\n/* end of Game */\n","//  main.js\n// Darworms   (c) 2018  David S, Maynard\nimport {\n  darworms\n} from \"./loader.js\";\nimport AudioSample from \"./AudioSample.js\";\nimport {\n  Point\n} from \"./Point.js\";\nimport \"./Grid.js\";\nimport {\n  Worm,\n  musicalkeys,\n  dnaregx\n} from \"./Worm.js\";\nimport {\n  Game,\n  gameInit,\n  makeMoves,\n  selectDirection,\n  updateScores\n} from \"./Game.js\";\nimport {\n  graphicsInit,\n  reScale,\n  wCanvas,\n  wGraphics,\n  drawPickCells,\n  drawCells,\n  clearCanvas,\n  setGrid,\n  setScale,\n  resizeCanvas,\n  addSprite,\n  clearSprites,\n  animateSprites\n} from \"./graphics.js\";\nimport {\n  scoreCanvasInit\n} from \"./scorecanvas.js\";\nimport {\n  emailGame,\n  saveGame,\n  loadGames,\n  freeGames\n} from \"./gameio.js\"\nimport {\n  log,\n  logging\n} from \"./utils.js\"\n/*\n  <script src=\"scripts/loader.js\"></script>\n  <script src=\"scripts/AudioSample.js\"></script>\n  <script src=\"scripts/Point.js\"></script>\n  <script src=\"scripts/Grid.js\"></script>\n  <script src=\"scripts/Worm.js\"Games></script>\n  <script src=\"scripts/WPane.js\"></script>\n  <script src=\"scripts/Game.js\"></script>\n  <script src=\"scripts/main.js\"></script>\n*/\n/*  DarWorms\n Copyright BitBLT Studios inc\n Author: David S. Maynard\n Deployment to Rackspace:\n scp -r -P 12960 ~/projects/SumoWorms/www/*.* dmaynard@bitbltstudios.com:/var/www/darworms/\n git push bitbltstudios:~/repo/ master\n\n darworms.com\n\n   interesting DarWorms\n EEF?A??FB??F?FF?CC?F?FF???A?FF?FD??E?EE??CE?E??E?DD?D??DB??C?BAX\n DBCDAFEDCEFFEFEEFFADDBADBCFFFFAFBCCCADEDBBAEBBEEABDDABDDCBACABAX\n AEF?AE?DB??F?FF?C??C?FF??FA?FF?FD??C?BE??CA?A??E?B??A??DA??C?BAX\n AEF?AE?EB??F?FF?C??D?FD??BC?B??FD??D?DE??CC?B??E?DA?BD?DB??C?BAX\n AEF?AE?FB??E?FF?C??F?FD??FC?BF?FD??D?EA??CA?A??E?BD?A??DB??C?BAX\n AEF?AB?FB??F?FE?C??C?FA??BA?A??FD??D?EEE?EA?E??E?CA?D??DC??C?BAX\n //  nice   almost perfect worm (316)\n AEF?AE?FB??C?FE?C??D?DF??CA?AF?FD??E?BA??BA?A??E?DD?A??DC??C?BAX\n\n // perfect\n DFADAFEEFBCEBFEFDDCDBDADCBAFBBAFEDCEBEDEAEECAEAEDDADDBDDBBACABAX\n\n // perfect and interesting\n FDEDBDAEABFEBEEFCFDFBFFFFBCCBBAFDBEDAEDEACCCBBAEACCCBDADCCCCBBAX\n\n // nice score  297\n AEF?AF?FB??E?FA?C??F?DD??CA?F??FD??E?BAE?EE?E??E?BD?D??DA??C?BAX\n\n // 116\n AEF?AE?FB??C?BE?C??F?DD??FA?BF?FD??E??A??CC?B??E?D??D??DC??C?BAX\n\n //  short  score 10\n //  short score 42\n AEF?AE?FB??C?BE?C??F?DDF??C?B??FD??E??A??EA?B??E?DA?D??DC??C?BAX\n// short score 2\n AEF?AB?FB????B?EC??F?B????C????FD?????E???C????E?D??B??DC??C?BAX\n// nice 30\nAEF?AF?FB????BA?C??F?DA???F?B??FD??E?D?D???????E?D??D??DC??C?BAX\n\n\nLOGO Darworm  (score 3)\nDFA?B??FC?????A?D???????C???B??FE??E???????????E?D?????D???CBBAX\nDFA?B??FC?????A?D???????C???B??FE??ED??????????E?D?????DC??CBBAX\nDFA?B?AFC???E?A?D???????CF??B??FE??ED?D??B?????E?D?????DC??CBBAX\nDFA?B?AFC???E?A?D???????CF??B??FE??ED?DE?B?????E?D?????DC??CBBAX\nDFA?B?AFC???E?A?D???????CF??B??FE??ED?D??B?????E?D?????DC??CBBAX\nDFA?B?AFC???E?A?D???????C???B?AFE??EDB?E????B??E?D??B??DC??CBBAX\nDFA?B?AFC???E?A?D???????C???B?AFE??EDB?E?C??B??E?D??B??DC??CBBAX\n\n// Almost space filling\n FEF?A??FB??C?BA?C??D?DF??BA?B??FD?EE?BA??EE?A??E?DD?D?DDC??C?BAX\n\n// good for fall off edge gameState\nEFA?B??FB??C??A?C??FDD????C?B??FD??E?E???EC?B??E????B??DC??CBBAX\nEFA?B??FB??C??A?C??FDD????C?B??FD??E?E???EC?B??E?D??B??DC??CBBAX\n\n// Interesting two player gamestate\nEFAFB?AFC?CC?BE?D??F?DA??BFFB??FE??E?EAE?EC?B??E?DA?BBADC??C?BAX\nFBCFEFFFBEEFBEEEFDCDFDAFACFCFFFFDDCCEDEDCBCEBBEEABDDBDDDCCACBBAX\n//  new worm filled completly via game play\nEBCCDBADECCCBBEEFBCCDBFFFFFCFFFFEBCCDEADCECCEBEEDBACDBDDABCCBBAX\n*/\n\ndarworms.main = (function() {\n\n  var deviceInfo = function() {\n    alert(\"This is a deviceInfo.\");\n    document.getElementById(\"width\").innerHTML = screen.width;\n    document.getElementById(\"height\").innerHTML = screen.height;\n    document.getElementById(\"colorDepth\").innerHTML = screen.colorDepth;\n  };\n  /* Game Globals  Done   wrap these globals in a function  */\n\n  var useKalimbaAudio = false;\n  var usePianoAudio = true;\n  var useSitarAudio = false;\n\n  var playerTypes = [3, 0, 1, 0];\n  var buttonNames = ['#p1button', '#p2button', '#p3button', '#p4button',\n    '#p1Lbutton', '#p2Lbutton', '#p3Lbutton', '#p4Lbutton'\n  ];\n  var typeNames = [\" None \", \"Random\", \" Same \", \" New  \", \"Smart\"];\n  var textFields = ['#p1textfield', '#p2textfield', '#p3textfield', '#p4textfield', '#edittextfield'];\n\n\n\n\n  var gWorms = [new Worm(1, darworms.wormStates.paused), new Worm(2, darworms.wormStates.paused), new Worm(3, darworms.wormStates.paused), new Worm(4, darworms.wormStates.paused)];\n\n\n  var setButtonNames = function() {\n    // document.getElementById(\"p1button\").innerHTML = typeNames[players[0]];\n    // document.getElementById(\"p1button\").html(typeNames[players[0]]).button(\"refresh\");\n    $(\"#p1button\").text(typeNames[playerTypes[0]]);\n    $(\"#p2button\").text(typeNames[playerTypes[1]]);\n    $(\"#p3button\").text(typeNames[playerTypes[2]]);\n    $(\"#p4button\").text(typeNames[playerTypes[3]]);\n\n    $(\"#p1Lbutton\").text(typeNames[playerTypes[0]]);\n    $(\"#p2Lbutton\").text(typeNames[playerTypes[1]]);\n    $(\"#p3Lbutton\").text(typeNames[playerTypes[2]]);\n    $(\"#p4Lbutton\").text(typeNames[playerTypes[3]]);\n    var bref = $(\"#p4button\");\n    var brefa = bref[0];\n\n    gWorms.forEach(function(worm, i) {\n      worm.wType = playerTypes[i];\n      worm.typeName = typeNames[worm.wType];\n      // worm.setNotes(i);\n      $(buttonNames[i]).removeClass(\n        playerTypes[i] === 0 ? \"ui-opaque\" : \"ui-grayed-out\");\n      $(buttonNames[i]).addClass(\n        playerTypes[i] === 0 ? \"ui-grayed-out\" : \"ui-opaque\");\n    });\n  };\n\n  var setupEditPage = function() {\n    // darworms.selectedIdx = $.mobile.activePage.attr(\"data-selecteddarworm\");\n    if (darworms.theGame && darworms.theGame.gameState !== darworms.gameStates.over) {\n      $('.darwormTypeRadioButtons').hide();\n      $('.playKeyNotes').hide();\n    } else {\n      $('.darwormTypeRadioButtons').show();\n      $('.playKeyNotes').show();\n      var darwormType = playerTypes[darworms.selectedIdx];\n      var color = darworms.colorNames[darworms.selectedIdx];\n      switch (darwormType) {\n        case 0:\n          $('#' + 'edit' + '-radio-choice-1').prop(\"checked\", true).checkboxradio(\"refresh\");\n          break\n        case 1:\n          $('#' + 'edit' + '-radio-choice-2').prop(\"checked\", true).checkboxradio(\"refresh\");\n          break;\n        case 2:\n          $('#' + 'edit' + '-radio-choice-3').prop(\"checked\", true).checkboxradio(\"refresh\");\n          break;\n        case 3:\n          $('#' + 'edit' + '-radio-choice-4').prop(\"checked\", true).checkboxradio(\"refresh\");\n          break;\n        case 4:\n          $('#' + 'edit' + '-radio-choice-5').prop(\"checked\", true).checkboxradio(\"refresh\");\n          break;\n      }\n      var selectinput = 'input[name=' + 'edit' + '-radio-choice]';\n\n      // $('input[name=green-radio-choice]').checkboxradio(\"refresh\");\n      // var selectedType = $(selectinput + ':checked').val();\n      $(selectinput).checkboxradio(\"refresh\");\n      // gWorms.forEach(function(worm, i) {\n      //  worm.toText();\n      $(\"input[name='edit-textname']\").textinput({\n        theme: darworms.themes[darworms.selectedIdx]\n      });\n      $(textFields[4]).val(playerTypes[darworms.selectedIdx] == 0 ? \"\" : gWorms[darworms.selectedIdx].name);\n      //  })\n    }\n    sendAnalytics();\n  }\n\n  var setSelectedDarwormType = function() {\n    /*\n     if (darworms.theGame && darworms.theGame.gameState !== darworms.gameStates.over) {\n       return;\n     }\n     var color = darworms.colorNames[darworms.selectedIdx];\n     var selectinput = 'input[name=' + 'edit' + '-radio-choice]';\n     var selectedType = $(selectinput + ':checked').val();\n     switch (selectedType) {\n       case \"none\":\n         playerTypes[darworms.selectedIdx] = 0;\n         break;\n       case \"random\":\n         playerTypes[darworms.selectedIdx] = 1;\n         break;\n       case \"same\":\n         playerTypes[darworms.selectedIdx] = 2;\n         break;\n       case \"new\":\n         playerTypes[darworms.selectedIdx] = 3;\n         break\n\n       default:\n         alert(\"unknown type\");\n     }\n     */\n    setButtonNames();\n  }\n  var sendAnalytics = function() {\n    try {\n\n\n      hash = location.hash;\n\n      if (hash) {\n        ga('send', 'pageview', hash);\n      } else {\n        ga('send', 'pageview');\n      }\n    } catch (err) {\n      if (logging()) console.log(err.message);\n    }\n  }\n  var showSettings = function() {\n    if (darworms.theGame && darworms.theGame.gameState !== darworms.gameStates.over) {\n      $('#geometryradios').hide();\n      $('#gridsizeslider').hide();\n      $('#abortgame').show();\n    } else {\n      $('#geometryradios').show();\n      $('#gridsizeslider').show();\n      $('#abortgame').hide();\n    }\n\n    $('#fps').val(darworms.graphics.fps).slider(\"refresh\");\n\n    $('#gridsize').val(darworms.dwsettings.gridSize).slider(\"refresh\");\n    $('#backg').val(darworms.dwsettings.backGroundTheme).slider(\"refresh\");\n    $('#doanim').val(darworms.dwsettings.doAnimations).slider(\"refresh\");\n    $('#audioon').val(darworms.dwsettings.doAudio).slider(\"refresh\");\n    $('#fixedinitpos').val(darworms.dwsettings.fixedInitPos).slider(\"refresh\");\n\n    $('#pickDirectionUI').val(darworms.dwsettings.pickDirectionUI).slider(\"refresh\");\n\n    sendAnalytics();\n    $('#myPages').css({\n      overflow: 'scroll',\n    });\n\n  }\n\n  var applySettings = function() {\n    var newGridSize = parseInt($('#gridsize').val());\n    if (newGridSize !== darworms.dwsettings.gridSize) {\n      darworms.dwsettings.gridSize = newGridSize;\n      try {\n        ga('send', 'event', 'gridSize', newGridSize)\n      } catch (err) {}\n    }\n    var newFps = parseInt($(\"#fps\").val());\n    if (newFps !== darworms.graphics.fps) {\n      darworms.graphics.fps = newFps;\n      try {\n        ga('send', 'event', 'fps', newFps)\n      } catch (err) {}\n    }\n    darworms.graphics.frameInterval = 1000 / darworms.graphics.fps;\n    darworms.dwsettings.gridGeometry = $('input[name=geometry-radio-choice]:checked').val();\n    if (darworms.dwsettings.backGroundTheme !== $('#backg').slider().val()) {\n      darworms.dwsettings.backGroundTheme = $('#backg').slider().val();\n      if (darworms.theGame) {\n        clearCanvas();\n        drawCells();\n      }\n    }\n\n    darworms.dwsettings.doAnimations = $('#doanim').slider().val() == \"true\" ? true : false;\n    darworms.dwsettings.doAudio = $('#audioon').slider().val() == \"1\" ? 1 : 0;;\n    darworms.dwsettings.fixedInitPos = $('#fixedinitpos').slider().val() == \"1\" ? 1 : 0;;\n    darworms.dwsettings.pickDirectionUI = $('#pickDirectionUI').slider().val() == \"1\" ? 1 : 0;\n\n    if (logging()) console.log(\" darworms.dwsettings.doAnimations \" + darworms.dwsettings.doAnimations);\n    if (logging()) console.log(\" darworms.dwsettings.doAudio \" + darworms.dwsettings.doAudio);\n    darworms.dwsettings.masterAudioVolume = $(\"#audiovol\").val() / 100;\n\n    if (logging()) console.log(\" darworms.dwsettings.masterAudioVolume \" + darworms.dwsettings.masterAudioVolume);\n  }\n\n  var injectSettings = function(gameTxt) {\n    try {\n      var gameObj = JSON.parse(gameTxt);\n      var nPlayers = 0;\n      darworms.dwsettings.gridGeometry = gameObj.gridGeometry;\n      if (darworms.dwsettings.backGroundTheme !== gameObj.backGroundTheme) {\n        darworms.dwsettings.backGroundTheme = gameObj.backGroundTheme;\n        if (darworms.theGame) {\n          clearCanvas();\n          drawCells();\n        }\n      }\n      darworms.dwsettings.doAnimations = gameObj.doAnimations;\n      darworms.dwsettings.doAudio = gameObj.doAudio;\n      darworms.dwsettings.fixedInitPos = gameObj.fixedInitPos;\n\n      darworms.dwsettings.pickDirectionUI = gameObj.pickDirectionUI;\n      darworms.dwsettings.masterAudioVolume = gameObj.masterAudioVolume\n      darworms.graphics.fps = gameObj.fps;\n      darworms.graphics.frameInterval = 1000 / darworms.graphics.fps;\n      darworms.dwsettings.gridSize = gameObj.width;\n\n\n      gameObj.players.forEach(function(aworm) {\n        var i = aworm.index;\n        gWorms[i].name = aworm.name;\n\n        //  decode  tyename therefore\n\n        if (dnaregx.test(gWorms[i].name)) {\n          if (!gWorms[i].fromText(gWorms[i].name)) {\n            alert(\"Invalid DNA for Daworm # \" + (i + 1) + \" \");\n            gWorms[i].wType = 0;\n          };\n\n        }\n        (gWorms[i].fromText(aworm.name))\n        gWorms[i].wType = aworm.typeName == \" None \" ? 0 : 2;\n        nPlayers += aworm.typeName == \" None \" ? 0 : 1;\n        playerTypes[i] = gWorms[i].wType\n        gWorms[i].score = aworm.score;\n        gWorms[i].instrument = aworm.instrument;\n        gWorms[i].setNotes(aworm.instrument);\n        gWorms[i].musickeyName = aworm.musickeyName;\n        gWorms[i].MusicScale = aworm.MusicScale;\n\n      });\n      try {\n        ga('send', 'event', 'loadGame', ((nPlayers*100) + gameObj.width));\n      } catch (err) {}\n      return gameObj;\n    } catch (err) {\n      alert(' Error parsing gameTxt:' + err.message);\n      return null;\n    };\n\n  }\n\n  var setupGridGeometry = function() {\n    if (logging()) console.log(\" pagebeforeshow setupGridGeometry \");\n    if (darworms.theGame && darworms.theGame.gameState !== darworms.gameStates.over) {\n      $('#geometryradios').hide();\n    } else {\n      $('#geometryradios').show();\n    }\n\n    var gridGeometry = darworms.dwsettings.gridGeometry;\n\n    switch (gridGeometry) {\n      case 'torus':\n        $('#geometry-radio-torus').prop(\"checked\", true).checkboxradio(\"refresh\");\n        break;\n      case 'falloff':\n        $('#geometry-radio-falloff').prop(\"checked\", true).checkboxradio(\"refresh\");\n        break;\n      case 'reflect':\n        $('#geometry-radio-reflect').prop(\"checked\", true).checkboxradio(\"refresh\");\n        break;\n      default:\n        alert(\" unknown grid geometry requested: \" + gridGeometry);\n\n    }\n  }\n\n\n  /* The following code is called from the game timer */\n\n  var updateGameState = function() {\n    // This is the game loop\n    // Called from timer (should be the requestAnimation timer)\n    // We either make one round of moves\n    // or if we are waiting for user input\n    // and we draw the direction selection screen\n    //\n    // if(logging()) console.log(\" updateGameState: gameState \" +  gameStateNames[theGame.gameState]);\n    // if(logging()) console.log(\"R\");\n    darworms.graphics.animFrame = darworms.graphics.animFrame + 1;\n    if (darworms.theGame.gameState === darworms.gameStates.running) {\n      // if(logging()) console.log(\"R\");\n      if (darworms.dwsettings.doAnimations) makeMoves();\n\n    }\n    if (darworms.theGame.gameState === darworms.gameStates.waiting) {\n      // if(logging()) console.log(\"w\");\n      darworms.theGame.drawPickCells();\n    }\n\n  };\n\n  var pointerEventToXY = function(e) {\n    var out = {\n      x: 0,\n      y: 0\n    };\n    if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\n      var touch = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];\n      out.x = touch.pageX;\n      out.y = touch.pageY;\n    } else if (e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\n      out.x = e.pageX;\n      out.y = e.pageY;\n    } else if (e.type == 'tap') {\n      out.x = (e.clientX || e.changedTouches[0].pageX) - (e.currentTarget.offsetLeft);\n      out.y = (e.clientY || e.changedTouches[0].pageY) - (e.currentTarget.offsetTop);\n    }\n    return out;\n  };\n\n  var wormEventHandler = function(event) {\n    var loc = pointerEventToXY(event)\n    var touchX = loc.x;\n    var touchY = loc.y\n    /*\n    var touchX = (event.offsetX || event.clientX);\n    var touchY = (event.offsetY || event.clientY);\n    var touchX = touchX - event.currentTarget.;  //  padding between canvas container and wcanvas\n    var touchY = touchY - 15;  //  padding between canvas container and wcanvas\n    // alert( event.toString() + \" tap event x:\" + touchX + \"  y:\" + touchY)\n    */\n\n    if (logging()) console.log(\" Tap Event at x: \" + touchX + \" y: \" + touchY);\n    // if(logging()) console.log(\" wcanvas css   width \" + $('#wcanvas').width() + \" css   height \" + $('#wcanvas').height());\n    // log (\" wcanvas coord width \" + wCanvas.width + \" coord height \"  + wCanvas.height  );\n    if (darworms.theGame.gameState === darworms.gameStates.waiting) {\n      selectDirection(new Point(touchX, touchY));\n    }\n  };\n  darworms.menuButton = function() {\n    if (logging()) console.log(\" menuButton\");\n    if (darworms.theGame.gameState && ((darworms.theGame.gameState == darworms.gameStates.running) ||\n        (darworms.theGame.gameState == darworms.gameStates.paused))) {\n      darworms.theGame.gameState = darworms.gameStates.paused;\n      $.mobile.changePage(\"#settingspage\");\n      darworms.theGame.needsRedraw = true;\n      drawCells();\n      $(\"#startpause\").text(\"Resume Game\");\n    } else {\n      if (darworms.theGame.gameState == darworms.gameStates.waiting) {\n        $.mobile.changePage(\"#settingspage\");\n      } else {\n        $.mobile.changePage(\"#menupage\");\n      }\n    }\n  }\n  darworms.setKeyVal = function(index) {\n    var selectedKeyInput = $('#select-native-key');\n    if (selectedKeyInput.length == 1) {\n      gWorms[darworms.selectedIdx].setKey(selectedKeyInput.val());\n      try {\n        ga('send', 'event', 'musickey', selectedKeyInput.val());\n      } catch (err) {}\n\n    }\n  }\n  darworms.setInstrumentVal = function(index) {\n    var selectedInstrumentInput = $('#select-instrument-dropdown');\n    if (selectedInstrumentInput.length == 1) {\n      var instrument = parseInt(selectedInstrumentInput.val());\n      gWorms[darworms.selectedIdx].setNotes(instrument);\n      try {\n        ga('send', 'event', 'instrument', darworms.audiosamplefiles[instrument][0]);\n      } catch (err) {}\n\n    }\n  }\n  darworms.sendemail = function() {\n    if (logging()) console.log(\" sendEMail \" + darworms.gameTxt);\n    emailGame(darworms.gameTxt);\n    try {\n      ga('send', 'event', 'emailGame');\n    } catch (err) {}\n  }\n\n  darworms.saveGame = function() {\n    if (logging()) console.log(\" saveGame \");\n    saveGame(darworms.gameTxt);\n  }\n\n  darworms.startgame = function(startNow) {\n    if (logging()) console.log(\" Startgame start now = \" + startNow);\n    if (darworms.theGame) {\n      if (logging()) console.log(\"GameState is \" +\n        darworms.theGame.gameState + (darworms.gameStateNames[darworms.theGame.gameState]));\n    }\n    // wCanvas.width = $('#wcanvas').width();\n    // wCanvas.height = $('#wcanvas').height(); // make it square\n    darworms.dwsettings.isLargeScreen = wCanvas.width >= darworms.dwsettings.minLargeScreenWidth;\n    var curScreen = new Point(wCanvas.width, wCanvas.height);\n    darworms.wCanvasPixelDim = curScreen;\n\n    if (darworms.theGame === undefined || darworms.theGame === null || darworms.theGame.grid.height != darworms.dwsettings.gridSize ||\n      !(darworms.wCanvasPixelDim.isEqualTo(curScreen))) {\n      if (logging()) console.log(\" theGame size has changed Screen is\" + curScreen.format() + \" grid = \" + darworms.dwsettings.gridSize + \" x \" +\n        darworms.dwsettings.gridSize);\n      if ((darworms.dwsettings.gridSize & 1) !== 0) {\n        // height must be an even number because of toroid shape\n        darworms.dwsettings.gridSize = darworms.dwsettings.gridSize + 1;\n      }\n\n      if ($('#debug').slider().val() === 1) {\n        alert(\" wCanvas \" + wCanvas.width + \" x \" + wCanvas.height +\n          \" css \" + $('#wcanvas').width() + \" x \" + $('#wcanvas').height() +\n          \" window \" + window.innerWidth + \" x \" + window.innerHeight);\n      }\n      darworms.theGame = new Game(darworms.dwsettings.gridSize, darworms.dwsettings.gridSize);\n    }\n    if (darworms.theGame.gameState === darworms.gameStates.over) {\n      darworms.theGame.initGame();\n      $(\"#startpause\").text(\"Start Game\");\n      darworms.theGame.needsRedraw = true;\n      drawCells();\n      darworms.theGame.worms = gWorms;\n      if (logging()) console.log(\" init gridsize: \" + $(\"#gridsize\").val() + \" gHeight\" + darworms.dwsettings.gridSize);\n\n      gWorms.forEach(function(worm, i) {\n        worm.init(playerTypes[i]);\n        if (playerTypes[i] !== 0) { //  not None\n\n          $(buttonNames[i]).addClass(\"ui-opaque\");\n        } else {\n          $(buttonNames[i]).addClass(\"ui-grayed-out\");\n        }\n        // $(textFields[i]).val(worm.toText());\n        var startingPoint = ((darworms.dwsettings.fixedInitPos == 1) ? darworms.theGame.origin :\n          (playerTypes[i] == 2) ? worm.startingPos : // Same\n          new Point((Math.floor(Math.random() * darworms.theGame.grid.width)),\n            (Math.floor(Math.random() * darworms.theGame.grid.height))));\n\n\n        worm.place(darworms.initialWormStates[playerTypes[i]], darworms.theGame,\n          startingPoint);\n        if (playerTypes[i] !== 0) { //  not None\n          darworms.theGame.grid.setSinkAt(startingPoint);\n        }\n      })\n    }\n    setButtonNames();\n    if (startNow === false) return;\n    updateScores(gWorms);\n    if (logging()) console.log(\" NEW in startgame darworms.dwsettings.doAnimations \" + darworms.dwsettings.doAnimations);\n    if (darworms.theGame.gameState === darworms.gameStates.running) {\n      // This is now a pause game button\n      // clearInterval(darworms.graphics.timer);\n      // document.getElementById(\"startpause\").innerHTML = \"Resume Game\";\n      $(\"#startpause\").text(\"Resume Game\");\n      darworms.theGame.gameState = darworms.gameStates.paused;\n      darworms.theGame.needsRedraw = true;\n      drawCells();\n      return;\n    }\n    if (darworms.theGame.gameState === darworms.gameStates.paused) {\n      // This is now a start game button\n      // document.getElementById(\"startpause\").innerHTML = \"Pause Game\";\n      $(\"#startpause\").text(\"Pause\");\n      darworms.theGame.gameState = darworms.gameStates.running;\n      // darworms.graphics.timer = setInterval(updateGameState, 1000 / $(\"#fps\").val());\n      // startGameLoop( $(\"#fps\").val());\n      return;\n    }\n    if (darworms.theGame.gameState === darworms.gameStates.over) {\n      // This is now a start game button\n      // alert(\"About to Start Game.\");\n      darworms.theGame.gameState = darworms.gameStates.running;\n      // darworms.graphics.timer = setInterval(updateGameState, 1000 / $(\"#fps\").val());\n      var animFramesPerSec = darworms.dwsettings.doAnimations ? darworms.graphics.fps : 60;\n      startGameLoop(animFramesPerSec);\n      if (logging()) console.log(\" setInterval: \" + 1000 / $(\"#fps\").val());\n      // document.getElementById(\"startpause\").innerHTML = \"Pause Game\";\n      $(\"#startpause\").text(\"Pause Game\");\n      initTheGame(true);\n      darworms.theGame.logGame();\n    }\n    if (!darworms.dwsettings.doAnimations) {\n      // run game loop inline and draw after game is over\n      //  No.  This locks the browser.  We must put it inside the the\n      // animation request and do a set of moves each animframe and draw the\n      // playfield\n      if (logging()) console.log('darworms.dwsettings.doAnimations == \"false\"')\n      darworms.theGame.gameState = darworms.gameStates.running;\n      clearCanvas();\n      drawCells();\n\n      if (logging()) console.log(\" Game Running\");\n      $(\"#startpause\").text(\"Running\");\n      /*  busy loop making moves.  Freezes the javascript engine!\n        while (darworms.theGame.gameState != darworms.gameStates.over) {\n         if (darworms.theGame.gameState === darworms.gameStates.waiting) {\n           break;\n         }\n         if (darworms.theGame.makeMove(false) === false) {\n           darworms.theGame.elapsedTime = darworms.theGame.elapsedTime + new Date().getTime();\n           if(logging()) console.log(\" Game Over\");\n           darworms.theGame.showTimes();\n           darworms.theGame.gameState = darworms.gameStates.over;\n           $(\"#startpause\").text(\"Start Game\");\n           // wGraphics.restore();\n         }\n       }\n       drawCells();\n       darworms.gameModule.updateScores();\n\n       $(\"#startpause\").text(\"Start Game\");\n       */\n    }\n\n  };\n\n  var startGameLoop = function(frameRate) {\n    darworms.graphics.fps = frameRate;\n    darworms.graphics.frameInterval = 1000 / frameRate;\n    darworms.graphics.iufps = 30;\n    darworms.graphics.uiInterval = 1000 / frameRate;\n    darworms.graphics.animFrame = 0;\n    darworms.graphics.uiFrames = 0;\n\n    darworms.graphics.rawFrameCount = 0;\n    darworms.graphics.drawFrameCount = 0;\n    darworms.graphics.rawFrameCount = 0;\n    darworms.graphics.uiFrameCount = 0;\n    darworms.graphics.then = Date.now();\n\n    darworms.graphics.uiThen = Date.now();\n    darworms.graphics.startTime = darworms.graphics.then;\n    darworms.graphics.uiInterval = 1000 / darworms.graphics.uifps;\n    doGameLoop();\n  };\n\n  var doGameLoop = function() {\n    // This is the game loop\n    // Called from requestAnimationFrame\n    // We either make one round of moves\n    // or if we are waiting for user input\n    // and we draw the direction selection screen\n    //\n\n    darworms.graphics.rawFrameCount++;\n    if (darworms.theGame.gameState == darworms.gameStates.over) {\n      //  end of game cleanup\n      gWorms.forEach(function(worm, i) {\n        if ((worm.wType == 3) || (worm.wType == 4)) { //  new or smart\n          worm.wType = 2; // Same\n\n        }\n        worm.toText(); //  update string version of dna\n      })\n      for (let ig = 0; ig < 4; ig++) {\n        playerTypes[ig] = gWorms[ig].wType;\n      }\n      setButtonNames();\n      return;\n    }\n    requestAnimationFrame(doGameLoop);\n    //   makes game moves or select a new direction for a worm\n    //  update graphics\n    darworms.graphics.animFrame = darworms.graphics.animFrame + 1;\n    if (darworms.theGame.gameState === darworms.gameStates.running) {\n      darworms.graphics.now = Date.now();\n      if (darworms.dwsettings.doAnimations) {\n        darworms.graphics.elapsed = darworms.graphics.now - darworms.graphics.then;\n        if (darworms.graphics.elapsed > darworms.graphics.frameInterval) {\n          darworms.graphics.uiFrames = darworms.graphics.uiFrames + 1;\n          clearSprites();\n          makeMoves();\n          darworms.graphics.then = darworms.graphics.now -\n            (darworms.graphics.elapsed % darworms.graphics.frameInterval)\n        }  else {\n          //   animations only no game state changedTouches\n          animateSprites(darworms.graphics.now);\n        }\n      } else {\n        var startTime = Date.now();\n        var nMoves = 0;\n        var movesPerFrame = 80; // allows for approx 30 fps with drawing\n        while ((nMoves < movesPerFrame) && (darworms.theGame.gameState != darworms.gameStates.over) &&\n          (darworms.theGame.gameState !== darworms.gameStates.waiting)) {\n          nMoves = nMoves + 1;;\n          makeMoves();\n        }\n        if (logging()) console.log(\"Compute time: \" + (Date.now() - startTime));\n        updateScores(darworms.theGame.worms);\n        clearSprites();\n        if (logging()) console.log(\"Draw time: \" + (Date.now() - startTime));\n\n        if (logging()) console.log(\".\");\n      }\n\n    }\n\n    if (darworms.theGame.gameState === darworms.gameStates.waiting) {\n      darworms.graphics.now = Date.now();\n      darworms.graphics.uiElapsed = darworms.graphics.now - darworms.graphics.uiThen;\n      if (darworms.graphics.uiElapsed > darworms.graphics.uiInterval) {\n        drawPickCells();\n        darworms.graphics.uiThen = darworms.graphics.now -\n          (darworms.graphics.uiElapsed % darworms.graphics.uiInterval)\n      }\n    }\n\n    // if ( darworms.graphics.rawFrameCount %  60 == 0) {\n    //     if(logging()) console.log(\"Date.now() \" + Date.now());\n    // }\n  }\n\n  darworms.abortgame = function() {\n    if (logging()) console.log(\"Abort Game called\");\n    $.mobile.changePage('#abortdialog', 'pop', true, true);\n    // $(\"#lnkDialog\").click();\n\n  }\n  darworms.emailDarwormButton = function(index) {\n    if (logging()) console.log(\"emailDarwormButton called\");\n    gWorms[darworms.selectedIdx].emailDarworm();\n  }\n\n  darworms.playScale = function(index) {\n    if (logging()) console.log(\"playScale called\");\n    gWorms[darworms.selectedIdx].playScale();\n  }\n\n  darworms.completeTrainingAI = function(index) {\n    if (logging()) console.log(\" completeTrainingAI \");\n    gWorms[darworms.selectedIdx].completeDarwormAI();\n    gWorms[darworms.selectedIdx].toText();\n    $('#edittextfield').val(gWorms[darworms.selectedIdx].wType == 0 ? \"\" : gWorms[darworms.selectedIdx].name);\n    $('#completeButton').hide();\n    $('#darwormdeflabel').text(wdescription(gWorms[darworms.selectedIdx]));\n    gWorms[darworms.selectedIdx].wType = 2; //SAME\n    playerTypes[darworms.selectedIdx] = 2; //same\n  }\n  darworms.completeTrainingRand = function(index) {\n    if (logging()) console.log(\" completeTrainingAI \");\n    gWorms[darworms.selectedIdx].completeDarwormRand();\n    gWorms[darworms.selectedIdx].toText();\n    $('#edittextfield').val(gWorms[darworms.selectedIdx].wType == 0 ? \"\" : gWorms[darworms.selectedIdx].name);\n    $('#completeButton').hide();\n    $('#darwormdeflabel').text(wdescription(gWorms[darworms.selectedIdx]));\n    gWorms[darworms.selectedIdx].wType = 2; //SAME\n    playerTypes[darworms.selectedIdx] = 2; //same\n  }\n  darworms.yesabortgame = function() {\n    if (logging()) console.log(\"Abort Game called\");\n    $.mobile.changePage('#playpage');\n    darworms.theGame.gameState = darworms.gameStates.over;\n    darworms.startgame(false);\n    // $(\"#lnkDialog\").click();\n\n  }\n\n  darworms.noabortgame = function() {\n    if (logging()) console.log(\"Abort Game called\");\n    $.mobile.changePage('#settingspage');\n    // $(\"#lnkDialog\").click();\n\n  }\n\n  var preventBehavior = function(e) {\n    e.preventDefault();\n  };\n  var fail = function(msg) {\n    alert(msg);\n  }\n  var initTheGame = function(startNow) {\n\n    gWorms.forEach(function(worm, i) {\n      // $(textFields[i]).val(worm.toText());\n      // worm.setNotes(i);\n    })\n    if (startNow) {\n      darworms.theGame.gameState = darworms.gameStates.running;\n\n    } else {\n      darworms.theGame.gameState = darworms.gameStates.over;\n\n    }\n    // startgame(startNow);\n    darworms.theGame.needsRedraw = true;\n\n  }\n\n  var initPlayPage = function() {\n    var mainbody = $('#myPages');\n    mainbody.css({\n      overflow: 'hidden',\n      //  height: '100%'\n    });\n    $('#wcanvasparagrap').css({\n\n      background: darworms.dwsettings.cellBackground[darworms.dwsettings.backGroundTheme]\n\n    });\n\n    if (darworms.theGame === undefined || darworms.theGame === null || darworms.theGame.grid.height != darworms.dwsettings.gridSize) {\n      darworms.theGame = new Game(darworms.dwsettings.gridSize, darworms.dwsettings.gridSize);\n      setGrid(darworms.theGame.grid, darworms.theGame)\n    }\n    setButtonNames();\n    drawCells();\n    updateScores(darworms.main.gWorms);\n    if (!darworms.playpageInitialized) {\n      resizeCanvas();\n      darworms.startgame(false);\n      darworms.audioContext.resume();\n      darworms.playpageInitialized = true;\n    }\n    sendAnalytics();\n  }\n\n  var leavePlayPage = function() {\n    var mainbody = $('#myPages');\n    mainbody.css({\n      overflow: 'auto',\n      height: 'auto'\n    });\n\n    if (!darworms.playpageInitialized) {\n      resizeCanvas();\n      darworms.startgame(false);\n      darworms.audioContext.resume();\n      darworms.playpageInitialized = true;\n    }\n    $(\"body\").css(\"scroll\", \"on\");\n    $(\"body\").css(\"overflow\", \"scroll\");\n  }\n  var swapTheme = function(selector, newTheme) {\n    //  needed because JQuery Mobile only adds additional themes\n    // note we could add a hash table to keep tutorialCheckbox// previously added themes\n    selector.removeClass('ui-page-theme-c');\n    selector.removeClass('ui-page-theme-d');\n    selector.removeClass('ui-page-theme-e');\n    selector.removeClass('ui-page-theme-f');\n    selector.page(\"option\", \"theme\", newTheme);\n  }\n  var initEditPage = function(foo) {\n    if (logging()) console.log(\" initEditPage \" + darworms.selectedIdx)\n    swapTheme($('#edit-darworm-page'), darworms.themes[darworms.selectedIdx]);\n    $('#edittextfield').val(gWorms[darworms.selectedIdx].wType == 0 ? \"\" : gWorms[darworms.selectedIdx].name);\n    // $('#edit-darworm-page').page.refresh();\n\n    $('[name=select-instrument]').val(gWorms[darworms.selectedIdx].instrument);\n    $('[name=select-instrument]').selectmenu(\"refresh\");\n\n    $('[name=select-key]').val(gWorms[darworms.selectedIdx].musickeyName);\n    $('[name=select-key]').selectmenu(\"refresh\");\n    // $('[name=select-instrument]').refresh();\n    $('#edit-darworm-page').trigger(\"create\");\n    if (gWorms[darworms.selectedIdx].wType == 0) {\n      $('#darwormdeflabel').text('Darworm DNA');\n    } else {\n      var nGenes = gWorms[darworms.selectedIdx].getNumGenes(darworms.dwsettings.codons.unSet);\n      $('#darwormdeflabel').text(wdescription(gWorms[darworms.selectedIdx]));\n      if (nGenes > 0) {\n        $('#completeButton').show();\n\n      } else {\n        $('#completeButton').hide();\n      }\n    }\n\n    var mainbody = $('#myPages');\n    mainbody.css({\n      overflow: 'scroll',\n    });\n    sendAnalytics();\n    // $('#edit-darworm-page').page.refresh();\n  }\n\n  var leaveEditPage = function(foo) {\n    if (logging()) console.log(\" leaveEditPage \" + foo)\n  }\n\n\n  var loadSavedGames = function() {\n    if (logging()) console.log(\" loadSavedGames \");\n    loadGames();\n    sendAnalytics();\n  }\n\n  var freeSavedGames = function() {\n    if (logging()) console.log(\" freeSavedGames \");\n    freeGames();\n  }\n\n  function unlockAudioContext(audioCtx) {\n    if (audioCtx.state !== 'suspended') return;\n    const b = document.body;\n    const events = ['touchstart', 'touchend', 'mousedown', 'keydown'];\n    events.forEach(e => b.addEventListener(e, unlock, false));\n\n    function unlock() {\n      audioCtx.resume().then(clean);\n    }\n\n    function clean() {\n      events.forEach(e => b.removeEventListener(e, unlock));\n    }\n  }\n\n  var loadAudio = function() {\n    // Create Smart Audio Container\n    darworms.audioContext = new(window.AudioContext || window.webkitAudioContext)();\n\n    if (darworms.audioContext == null) {\n      darworms.dwsettings.doAudio = false;\n      alert(\" Could not load webAudio... muting game\");\n      $('#doAudio').hide();\n    }\n    unlockAudioContext(darworms.audioContext);\n    if (logging()) console.log(\"audio is \" + darworms.dwsettings.doAudio + \"  Context state is \" + darworms.audioContext.state);\n\n    if (darworms.dwsettings.doAudio) {\n      if (darworms.audioContext.createGain !== undefined) {\n        darworms.masterGainNode = darworms.audioContext.createGain(0.5);\n      }\n      if (darworms.audioContext.createStereoPanner !== undefined) {\n        darworms.audioPanner = darworms.audioContext.createStereoPanner();\n      }\n\n      //   loading AudioSample Files\n      /*\n      if (useKalimbaAudio) {\n        new AudioSample(\"b3\", \"sounds/a_kalimba_b3.wav\");\n        new AudioSample(\"c4\", \"sounds/b_kalimba_c4.wav\");\n        new AudioSample(\"d4\", \"sounds/c_kalimba_d4.wav\");\n        new AudioSample(\"e4\", \"sounds/d_kalimba_e4.wav\");\n        new AudioSample(\"fsharp4\", \"sounds/e_kalimba_fsharp4.wav\");\n        new AudioSample(\"g4\", \"sounds/f_kalimba_g4.wav\");\n        new AudioSample(\"a4\", \"sounds/g_kalimba_a4.wav\");\n        new AudioSample(\"b4\", \"sounds/h_kalimba_b4.wav\");\n        new AudioSample(\"c5\", \"sounds/i_kalimba_c5.wav\");\n        new AudioSample(\"b3\", \"sounds/j_kalimba_d5.wav\");\n        new AudioSample(\"e5\", \"sounds/k_kalimba_e5.wav\");\n        new AudioSample(\"fsharp5\", \"sounds/l_kalimba_fsharp5.wav\");\n        new AudioSample(\"g5\", \"sounds/m_kalimba_g5.wav\");\n        new AudioSample(\"a5\", \"sounds/n_kalimba_a5.wav\");\n        new AudioSample(\"b5\", \"sounds/o_kalimba_b5.wav\");\n        new AudioSample(\"c6\", \"sounds/p_kalimba_c6.wav\");\n\n      }\n      if (usePianoAudio) {\n        new AudioSample(\"a1\", \"sounds/piano/a1.wav\");\n        new AudioSample(\"a1s\", \"sounds/piano/a1s.wav\");\n        new AudioSample(\"b1\", \"sounds/piano/b1.wav\");\n        new AudioSample(\"c1\", \"sounds/piano/c1.wav\");\n        new AudioSample(\"c1s\", \"sounds/piano/c1s.wav\");\n        new AudioSample(\"c2\", \"sounds/piano/c2.wav\");\n        new AudioSample(\"d1\", \"sounds/piano/d1.wav\");\n        new AudioSample(\"d1s\", \"sounds/piano/a1.wav\");\n        new AudioSample(\"e1\", \"sounds/piano/e1.wav\");\n        new AudioSample(\"f1\", \"sounds/piano/f1.wav\");\n        new AudioSample(\"f1s\", \"sounds/piano/f1s.wav\");\n        new AudioSample(\"g1\", \"sounds/piano/g1.wav\");\n        new AudioSample(\"g1s\", \"sounds/piano/g1s.wav\");\n      }\n      if (useSitarAudio) {\n        new AudioSample(\"sitar1\", \"sounds/sitar/sitar1.wav\");\n        new AudioSample(\"sitar2\", \"sounds/sitar/sitar2.wav\");\n        new AudioSample(\"sitar3\", \"sounds/sitar/sitar3.wav\");\n        new AudioSample(\"sitar4\", \"sounds/sitar/sitar4.wav\");\n        new AudioSample(\"sitar5\", \"sounds/sitar/sitar5.wav\");\n        new AudioSample(\"sitar6\", \"sounds/sitar/sitar6.wav\");\n\n      }\n\n\n      new AudioSample(\"piano\", \"sounds/piano-c2.wav\");\n      new AudioSample(\"guitar\", \"sounds/GuitarTrimmed.wav\");\n      new AudioSample(\"kalimba\", \"sounds/i_kalimba_c5.wav\");\n      new AudioSample(\"sitar\", \"sounds/Sitar-C5.wav\");\n      new AudioSample(\"flute\", \"sounds/FluteC3Trimmed.wav\");\n      new AudioSample(\"clarinet\", \"sounds/Roland-SC-88-Kalimba-C5.wav\");\n      new AudioSample(\"death\", \"sounds/darworm-death.wav\");\n      */\n      var selectdropdown = $('#select-instrument-dropdown');\n      darworms.audiosamplefiles.forEach(function(file, index) {\n        new AudioSample(file[0], file[1]);\n        var optionTemplate = '<option value=\"' + index + '\">' + file[0] + '</option>';\n        selectdropdown.append(optionTemplate);\n        selectdropdown.selectmenu();\n        selectdropdown.selectmenu('refresh', true);\n      });\n\n      var keydropdown = $('#select-native-key');\n      Object.keys(musicalkeys).forEach(key => {\n        var optionTemplate = '<option value=\"' + key + '\">' + key + '</option>';\n        keydropdown.append(optionTemplate);\n        keydropdown.selectmenu();\n        keydropdown.selectmenu('refresh', true);\n\n      })\n\n    }\n    var twelfrootoftwo = 1.05946309436;\n    var noteRate = 0.5; // lowest note  C3\n    var noteFrequency = 261.626; // Middle C   (C4)\n    do {\n      darworms.audioPlaybackRates.push(noteRate);\n      darworms.audioFrequencies.push(noteFrequency * noteRate);\n      noteRate = noteRate * twelfrootoftwo;\n\n    }\n    while (darworms.audioPlaybackRates.length < 13);\n    if (logging()) console.log(\"Final rate = \" + darworms.audioPlaybackRates[12] + \"  error: \" +\n      (1.0 - darworms.audioPlaybackRates[12]));\n\n    darworms.audioPlaybackRates[12] = 1.0;\n\n\n\n    // context state at this time is `undefined` in iOS8 Safari\n    if (darworms.audioContext.state === 'suspended') {\n      var resume = function() {\n        darworms.audioContext.resume();\n\n        setTimeout(function() {\n          if (darworms.audioContext.state === 'running') {\n            document.body.removeEventListener('touchend', resume, false);\n          }\n        }, 0);\n      };\n\n      document.body.addEventListener('touchend', resume, false);\n    }\n\n  }\n\n  var initGlobals = function() {\n\n  }\n\n  var wdescription = function(worm) {\n    var unSet = worm.getNumGenes(darworms.dwsettings.codons.unSet);\n    var ai = worm.getNumGenes(darworms.dwsettings.codons.smart);\n    var set = 64 - (unSet + ai);\n    return ('Darworm DNA: ' +\n      unSet + ' untrained ' +\n      set + ' trained ' +\n      ai + ' awaiting ai ');\n  }\n\n  var typeFromName = function(name) {\n    switch (name) {\n      case \"none\":\n        return 0;\n        break;\n      case \"smart\":\n        return 4;\n        break\n      case \"random\":\n        return 1;\n        break;\n      case \"same\":\n        return 2;\n        break;\n      case \"new\":\n        return 3;\n        break\n\n      default:\n        alert(\"unknown type (not none, randowm, new or same)\");\n        return 0;\n    }\n  }\n\n  var init = function() {\n    // This may be needed when we actually build a phoneGap app\n    // in this case delay initialization until we get the deviceready event\n    document.addEventListener(\"deviceready\", deviceInfo, true);\n    if (logging()) console.log(\"development mode: \" + darworms.dwsettings.dologging);\n    if (logging()) console.log(\"width: \" + $(window).width());\n    $(\"#logging\").slider().val(darworms.dwsettings.dologging ? \"true\" : \"false\");\n    $('#versionstring')[0].innerHTML = \"Version \" + darworms.version;\n    var when;\n    try {\n      when  = new Date(darworms.builddate);\n    } catch (err) {\n      when = Date.now();\n    }\n      $('#builddate')[0].innerHTML = when.toString();\n    // See if the url constains an encoded game\n    try {\n      const urlParams = new URLSearchParams(window.location.search);\n      if (logging()) console.log(location.search);\n      if (urlParams.has('darwormsgame')) {\n        darworms.gameTxt = decodeURIComponent(urlParams.get('darwormsgame'));\n        if (darworms.gameTxt) {\n          injectSettings(darworms.gameTxt);\n          //  go to Playpage here ?\n          scoreCanvasInit();\n          updateScores(gWorms);\n          $.mobile.changePage('#playpage');\n          darworms.dwsettings.forceInitialGridSize = false;\n          try {\n            ga('send', 'event', 'urlGame');\n          } catch (err) {}\n        }\n      }\n    } catch (err) {\n      alert(\"Trouble parsing the url. Be sure to copy and paste the entire url starting with 'https' all way through to the lst '}' \\n\" + err.message);\n    };\n    graphicsInit();\n    darworms.dwsettings.isLargeScreen = $(window).width() >= darworms.dwsettings.minLargeScreenWidth;\n    darworms.dwsettings.isTinyScreen = $(window).width() < darworms.dwsettings.maxSmallSreenWidth;\n    if (darworms.dwsettings.forceInitialGridSize) {\n      darworms.dwsettings.gridSize = darworms.dwsettings.isLargeScreen ?\n        darworms.dwsettings.largeGridSize :\n        darworms.dwsettings.isTinyScreen ?\n        darworms.dwsettings.tinyGridSize :\n        darworms.dwsettings.smallGridSize;\n    }\n\n    darworms.wCanvasPixelDim = new Point(wCanvas.clientWidth, wCanvas.clientHeight); // log ( \" init wGraphics \" + darworms.main.wGraphics);\n    $('#wcanvas').bind('tap', wormEventHandler);\n    // $('#wcanvas').on(\"tap\", wormEventHandler);\n    // $('#wcanvas').bind('vmousedown', wormEventHandler);\n\n    // this should depend on scale factor.  On small screens\n    // we should set pickDirectionUI to true\n    $('#pickDirectionUI').slider().val(0);\n    $('#pickDirectionUI').slider(\"refresh\");\n\n    darworms.wCanvasRef = $('#wcanvas');\n\n    initGlobals();\n\n    loadAudio();\n\n    setButtonNames();\n\n    // applySettings();\n\n\n\n    gameInit(); // needed to init local data in the gameModule closure\n    //  These values are needed by both mainModule and gameModule\n    //  so for now we keep them as globals\n    //  Perhaps the time routines should all be moved into the gameModule closure\n    // and we can make some or all of these private to the gameModule closure\n    // darworms.theGame = new Game ( darworms.dwsettings.forceInitialGridSize, darworms.dwsettings.forceInitialGridSize);\n    // darworms.startgame(false);\n    darworms.dwsettings.noWhere = new Point(-1, -1);\n\n\n    //  The following code is designed to remove the toolbar on mobile Safari\n    if (!window.location.hash && window.addEventListener) {\n      window.addEventListener(\"load\", function() {\n        if (logging()) console.log(\"load event listener triggered\");\n        setTimeout(function() {\n          window.scrollTo(0, 0);\n        }, 100);\n      });\n      window.addEventListener(\"orientationchange\", function() {\n        setTimeout(function() {\n          window.scrollTo(0, 0);\n        }, 100);\n      });\n    }\n    $(window).bind('throttledresize orientationchange', function(event) {\n      window.scrollTo(1, 0);\n      if (logging()) console.log(\"resize event triggered\");\n      if (darworms.theGame) {\n        clearCanvas();\n      }\n      resizeCanvas();\n\n      if (darworms.theGame) {\n        reScale(darworms.theGame.grid.width, darworms.theGame.grid.height);\n      }\n    });\n\n    gWorms.forEach(function(worm, i) {\n      worm.setNotes(worm.instrument || 0);\n    })\n    resizeCanvas();\n    $(\"#p1button\").click(function() {\n      darworms.selectedIdx = 0;\n    });\n    $(\"#p2button\").click(function() {\n      darworms.selectedIdx = 1;\n    });\n    $(\"#p3button\").click(function() {\n      darworms.selectedIdx = 2;\n    });\n    $(\"#p4button\").click(function() {\n      darworms.selectedIdx = 3;\n    });\n    $(\"#nextbutton\").click(function() {\n      if (logging()) console.log(\" nextbutton clicked\");\n      $.mobile.changePage(\"#edit-darworm-page\", {\n        allowSamePageTransition: true\n      });\n      darworms.selectedIdx = ((darworms.selectedIdx + 1) % gWorms.length);\n      initEditPage(darworms.selectedIdx);\n      // $.mobile.changePage( \"#edit-darworm-page\", { allowSamePageTransition: true } );\n    });\n    $(\"input[name='edit-radio-choice']\").on(\"change\", function() {\n      if (logging()) console.log(\" edit-radio-choice on change function\");\n      var type = ($(\"input[name='edit-radio-choice']:checked\").val());\n      playerTypes[darworms.selectedIdx] = typeFromName(type);\n      gWorms[darworms.selectedIdx].wType = playerTypes[darworms.selectedIdx];\n      gWorms[darworms.selectedIdx].init(typeFromName(type));\n      $('#edittextfield').val(typeFromName(type) == 0 ? \"\" : gWorms[darworms.selectedIdx].name);\n      if (gWorms[darworms.selectedIdx].wType == 0) {\n        $('#darwormdeflabel').text('Darworm DNA');\n        $('#completeButton').hide();\n      } else {\n        var nUntrained = gWorms[darworms.selectedIdx].getNumGenes(darworms.dwsettings.codons.unSet);\n        $('#darwormdeflabel').text(gWorms[darworms.selectedIdx].wdescription);\n        $('#darwormdeflabel').text(wdescription(gWorms[darworms.selectedIdx]));\n        if (nUntrained > 0) {\n          $('#completeButton').show()\n        } else {\n          $('#completeButton').hide()\n        }\n      }\n      try {\n        ga('send', 'event', 'wType', type, darworms.selectedIdx)\n      } catch (err) {}\n    });\n\n    $(\"input[name='edit-textname']\").on(\"change\", function() {\n      if (logging()) console.log(\" edit-textname\")\n      var dnastring = ($(\"input[name='edit-textname']\").val());\n      if (dnaregx.test(dnastring)) {\n        if (gWorms[darworms.selectedIdx].fromText(dnastring)) {\n          gWorms[darworms.selectedIdx].wType = 2; // Same\n          playerTypes[darworms.selectedIdx] = 2;\n          setupEditPage();\n          $(darworms.buttonSelectors[darworms.selectedIdx]).text(typeNames[playerTypes[darworms.selectedIdx]]);\n          $(darworms.buttonLSelectors[darworms.selectedIdx]).text(typeNames[playerTypes[darworms.selectedIdx]]);\n          gWorms[darworms.selectedIdx].toText();\n          $(\"input[name='edit-textname']\").textinput({\n            theme: darworms.themes[darworms.selectedIdx]\n          });\n        };\n      } else {\n        $(\"input[name='edit-textname']\").textinput({\n          theme: \"a\"\n        });\n      }\n    });\n  }\n\n  return {\n    init: init,\n    gWorms: gWorms,\n    setSelectedDarwormType: setSelectedDarwormType,\n    setupEditPage: setupEditPage,\n    applySettings: applySettings,\n    injectSettings: injectSettings,\n    showSettings: showSettings,\n    setupGridGeometry: setupGridGeometry,\n    initPlayPage: initPlayPage,\n    leavePlayPage: leavePlayPage,\n    wormEventHandler: wormEventHandler,\n    initEditPage: initEditPage,\n    leaveEditPage: leaveEditPage,\n    loadSavedGames: loadSavedGames,\n    freeSavedGames: freeSavedGames,\n    sendAnalytics: sendAnalytics\n\n\n  };\n\n})();\n/* end of Game */\n"],"names":["darworms","xPts","yPts"],"mappings":"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"}